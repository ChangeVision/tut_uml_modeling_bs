<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="description" content="この文書は、モデリングツールにastah*を使って、ソフトウェアの開発にUMLを使う方法について学ぶチュートリアルです。">
<meta name="author" content="株式会社チェンジビジョン">
<title>モデルを使ってソフトウェアを開発しよう</title>
<link rel="stylesheet" href="css/mystyle.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/rouge-custom.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>モデルを使ってソフトウェアを開発しよう</h1>
<div class="details">
<span id="author" class="author">株式会社チェンジビジョン</span><br>
<span id="revnumber">バージョン html_0350,</span>
<span id="revdate">2022-02-17</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目次</div>
<ul class="sectlevel1">
<li><a href="#_preface">はじめに</a>
<ul class="sectlevel2">
<li><a href="#_この文書の目的">この文書の目的</a></li>
<li><a href="#_対象目標">対象・目標</a></li>
<li><a href="#_アイコンの説明">アイコンの説明</a></li>
</ul>
</li>
<li><a href="#_copyright">注意事項</a>
<ul class="sectlevel2">
<li><a href="#_諸注意">諸注意</a></li>
<li><a href="#_商標等について">商標等について</a></li>
</ul>
</li>
<li><a href="#_preparation">1 準備</a>
<ul class="sectlevel2">
<li><a href="#_モデリングツールを用意する">1.1 モデリングツールを用意する</a></li>
<li><a href="#_実装環境を用意する">1.2 実装環境を用意する</a></li>
<li><a href="#_演習用のプロジェクトを用意する">1.3 演習用のプロジェクトを用意する</a></li>
<li><a href="#_ボウリングのスコアのつけ方">1.4 ボウリングのスコアのつけ方</a></li>
</ul>
</li>
<li><a href="#_structure_design">2 スコアシートのデータ構造を調べる</a>
<ul class="sectlevel2">
<li><a href="#_スコアシートの構造をオブジェクト図で表す">2.1 スコアシートの構造をオブジェクト図で表す</a></li>
<li><a href="#_スコアシートの構造をクラス図で表す">2.2 スコアシートの構造をクラス図で表す</a></li>
<li><a href="#_まとめ">2.3 まとめ</a></li>
</ul>
</li>
<li><a href="#_model_to_code_design">3 モデルとコードの対応づけ</a>
<ul class="sectlevel2">
<li><a href="#_対応づけ検討用モデルの作成">3.1 対応づけ検討用モデルの作成</a></li>
<li><a href="#_変換ルールを使ってコードを作成する">3.2 変換ルールを使ってコードを作成する</a></li>
<li><a href="#_まとめ_2">3.3 まとめ</a></li>
</ul>
</li>
<li><a href="#_スコアを記録する動作をモデルで表す">4 スコアを記録する動作をモデルで表す</a>
<ul class="sectlevel2">
<li><a href="#_フレームの状態について検討する">4.1 フレームの状態について検討する</a></li>
<li><a href="#_フレームの状態をステートマシン図で表す">4.2 フレームの状態をステートマシン図で表す</a></li>
<li><a href="#_サービスフレームの扱いについて検討する">4.3 サービスフレームの扱いについて検討する</a></li>
<li><a href="#_ゲームの進行について検討する">4.4 ゲームの進行について検討する</a></li>
</ul>
</li>
<li><a href="#_summary">5 まとめ</a></li>
<li><a href="#_other_diagrams">6 他の図、他の機能など</a></li>
<li><a href="#_appendix-01">付録 A: 関連資料、ワークシート等</a></li>
<li><a href="#_glossary">用語集</a></li>
<li><a href="#_bibliography">参考文献</a></li>
<li><a href="#_colophon">奥付</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_preface"><a class="anchor" href="#_preface"></a>はじめに</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_この文書の目的"><a class="anchor" href="#_この文書の目的"></a>この文書の目的</h3>
<div class="paragraph lead">
<p>この文書は、ソフトウェアの開発にモデリングツールを使う方法などについて独習するためのチュートリアルです。</p>
</div>
<div class="paragraph">
<p>このチュートリアルは、ソフトウェアの開発に、UMLを使って描いたモデルが役に立つことを実感する機会を提供することを目的としています。
主に、これからソフトウェア開発にモデル図を使うことについて学ぶみなさんを対象にしています。
また、モデリングツールを使うことにも慣れてもらえるよう、「astah* Professional 」使って演習します。</p>
</div>
</div>
<div class="sect2">
<h3 id="_対象目標"><a class="anchor" href="#_対象目標"></a>対象・目標</h3>
<div class="sect3">
<h4 id="_チュートリアルの対象者"><a class="anchor" href="#_チュートリアルの対象者"></a>チュートリアルの対象者</h4>
<div class="paragraph">
<p>このチュートリアルは、次のような方を対象者と想定しています。</p>
</div>
<div class="ulist">
<div class="title">チュートリアルの対象者</div>
<ul>
<li>
<p>モデリングやUMLについてこれから学ぼうとしているみなさん</p>
</li>
<li>
<p>ソフトウェア開発工程は知っているが、まだモデル図を活用していないみなさん</p>
</li>
<li>
<p>分析・設計・テストなどソフトウェアの開発に携わっているみなさん</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_チュートリアルの目標"><a class="anchor" href="#_チュートリアルの目標"></a>チュートリアルの目標</h4>
<div class="paragraph">
<p>みなさんがチュートリアル終了後に次のような人になっていることを、このチュートリアルの目標としています。</p>
</div>
<div class="ulist">
<div class="title">チュートリアルの目標（人物像）</div>
<ul>
<li>
<p>開発工程のどこでどのモデル図を使えばよいか知っている（知っている人になる）</p>
</li>
<li>
<p>「開発にはモデルがあったほうがいい」と考えている</p>
</li>
<li>
<p>自分だけでなく他の人にもモデリングを勧めたいと考えている</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_アイコンの説明"><a class="anchor" href="#_アイコンの説明"></a>アイコンの説明</h3>
<div class="paragraph">
<p>本文中では、次のようなアイコンを用いています。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
告知。みなさんが覚えておくとよい追加情報など。
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
ティップス。覚えておくと便利なちょっとしたヒントやコツ。
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
重要。間違えたり見落とすと期待通りの結果が得られない設定や操作など。
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="注意"></i>
</td>
<td class="content">
注意。気をつけないと問題の発生につながるようなことがら。
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="警告"></i>
</td>
<td class="content">
警告。守らないと破損や怪我などにつながる可能性のあることがら。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_copyright"><a class="anchor" href="#_copyright"></a>注意事項</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_諸注意"><a class="anchor" href="#_諸注意"></a>諸注意</h3>
<div class="ulist">
<ul>
<li>
<p>本文書は、株式会社チェンジビジョン（作成者）が編集したもので、本文書に関する権利、責任は作成者が保有します。</p>
</li>
<li>
<p>本分書に記載されている情報は、本文書を更新した時点のものであり、利用時にはURLなどの各種の情報が変更されている可能性があります。</p>
</li>
<li>
<p>本文書は演習用テキストとしての使用を想定し、内容等は予告なしに変更することがあります。また、作成者がその内容を保証するものではありません。</p>
</li>
<li>
<p>本文書の内容に誤りや不正確な記述がある場合も、作成者は一切の責任を負いません。</p>
</li>
<li>
<p>本文書に記載の内容や実施結果からいかなる損害が生じても、作成者は責任を負いかねますので、あらかじめご了承ください。</p>
</li>
<li>
<p>本文書の複製、保存については、作成者の同意を得てください。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_商標等について"><a class="anchor" href="#_商標等について"></a>商標等について</h3>
<div class="ulist">
<ul>
<li>
<p>Windows 並びに同社の各製品名は米国マイクロソフトコーポレーションの米国およびその他の国における登録商標です。</p>
</li>
<li>
<p>Apple、iCloud、iPad、iPhone、Mac、Macintosh、macOSは、米国およびその他の国々で登録されたApple Inc.の商標です。</p>
</li>
<li>
<p>Linuxは Linus Torvalds氏、米国及びその他の国における登録商標 あるいは商標です。</p>
</li>
<li>
<p>UNIXは、X/Open Company Limitedが独占的にライセンスしている米国ならびに他の国における登録商標です。</p>
</li>
<li>
<p>その他、本書に記載されている社名、製品名、ブランド名、システム名などは、一般に商標または登録商標でそれぞれ帰属者の所有物です。</p>
</li>
<li>
<p>本文中では &#169; 、&#174; 、 &#8482; 、は表示していません。</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="重要"></i>
</td>
<td class="content">
<div class="paragraph">
<p>ここで、チェンジビジョンの保有する商標等について言及する。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_preparation"><a class="anchor" href="#_preparation"></a>1 準備</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>このチュートリアルでは、モデリングツールとして astah* Professional を、実装にはRubyを使います。
最初に、演習に必要な環境を用意しましょう。</p>
</div>
<div class="sect2">
<h3 id="_モデリングツールを用意する"><a class="anchor" href="#_モデリングツールを用意する"></a>1.1 モデリングツールを用意する</h3>
<div class="paragraph">
<p>このチュートリアルで使用するモデリングツール astah* Professional を用意しましょう。</p>
</div>
<div class="paragraph">
<p>購入前に試用したい場合は、次のページを参照してください。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">astah*製品の評価手順</dt>
<dd>
<p><code><a href="https://astah.change-vision.com/ja/shopping/evaluate.html" class="bare">https://astah.change-vision.com/ja/shopping/evaluate.html</a></code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>購入する場合は、次のページを参照して、自分に合ったライセンスを選択してください。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">最適なライセンスを見つける</dt>
<dd>
<p><code><a href="https://astah.change-vision.com/ja/shopping/price.html" class="bare">https://astah.change-vision.com/ja/shopping/price.html</a></code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>いずれかの方法で、 astah* Professional を入手できたら、次のページを参照して、自分に合ったライセンスを登録してください。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ライセンス登録方法</dt>
<dd>
<p><code><a href="https://astah.change-vision.com/ja/registry.html" class="bare">https://astah.change-vision.com/ja/registry.html</a></code></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_実装環境を用意する"><a class="anchor" href="#_実装環境を用意する"></a>1.2 実装環境を用意する</h3>
<div class="paragraph">
<p>このチュートリアルでは、実装に Ruby を使います。執筆時点では 2.7.2 を使いました。</p>
</div>
<div class="paragraph">
<p>Ruby は、Windows、Mac、Linuxで動作するオープンソースの言語プログラミング言語です。
インストール方法は利用環境によって異なりますので、詳しくは、Rubyの公式サイトの説明やWebの記事を参考にしてください。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Rubyのインストール</dt>
<dd>
<p><code><a href="https://www.ruby-lang.org/ja/documentation/installation/" class="bare">https://www.ruby-lang.org/ja/documentation/installation/</a></code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>このチュートリアルでは、Rubyの高度な機能、規模の大きなライブラリやフレームワークは使いません。
ですが、Rubyについて多少の知識は必要になるでしょう。
Rubyになじみがない人は、公式サイトにある次のようなページを参考にするとよいでしょう。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">他言語からのRuby入門</dt>
<dd>
<p><code><a href="https://www.ruby-lang.org/ja/documentation/ruby-from-other-languages/" class="bare">https://www.ruby-lang.org/ja/documentation/ruby-from-other-languages/</a></code></p>
</dd>
<dt class="hdlist1">20分ではじめるRuby</dt>
<dd>
<p><code><a href="https://www.ruby-lang.org/ja/documentation/quickstart/" class="bare">https://www.ruby-lang.org/ja/documentation/quickstart/</a></code></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_演習用のプロジェクトを用意する"><a class="anchor" href="#_演習用のプロジェクトを用意する"></a>1.3 演習用のプロジェクトを用意する</h3>
<div class="paragraph">
<p>業務やシステムを分析（あるいは設計）するときは、たいてい複数種類のモデル図を使って表します。
astah* では、複数のモデル図をまとめてたモデルファイルを「プロジェクト」と呼んでいます。
<a href="#create_proj01">リスト1</a> に従って、演習用のプロジェクトを用意しましょう。</p>
</div>
<div id="create_proj01" class="exampleblock">
<div class="title">リスト 1. 演習で使うプロジェクトを作成する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>astah* を起動する。</p>
</li>
<li>
<p>「ファイル」メニューから「プロジェクトの新規作成」を選択する（ <a href="#create_project01">図 1.1</a> ）。</p>
</li>
</ol>
</div>
<div id="create_project01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-131611.png" alt="GSW 20220206 131611" width="75%">
</div>
<div class="title">図 1.1 新しいプロジェクトを作成する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「no_title」という名前で新しいプロジェクトが作成される（ <a href="#create_project02">図 1.2</a> ）。</p>
</li>
</ol>
</div>
<div id="create_project02" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-131639.png" alt="GSW 20220206 131639" width="75%">
</div>
<div class="title">図 1.2 新しいプロジェクトが作成された</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「ファイル」メニューから「プロジェクトを保存」を選択する（ <a href="#create_project03">図 1.3</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>「保存」ダイアログが開く。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="create_project03" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-131657.png" alt="GSW 20220206 131657" width="75%">
</div>
<div class="title">図 1.3 新しいプロジェクトを保存する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>プロジェクトの保存場所と保存するファイル名を指定する。</p>
<div class="ulist">
<ul>
<li>
<p>ここでは、保存場所として「デスクトップ」に「BowlingScore」フォルダを作成した。</p>
</li>
<li>
<p>ファイル名に「bowling_score」を指定して保存した（ <a href="#create_project04">図 1.4</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="create_project04" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-131840.png" alt="GSW 20220206 131840" width="75%">
</div>
<div class="title">図 1.4 ダイアログを操作してプロジェクトを保存する場所とプロジェクトファイル名を指定する</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
新規プロジェクトを作成したら、このように、モデルを作成する前に名前をつけて保存しておくとよいでしょう。
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>保存すると、プロジェクトファイルにつけた名前が「構造ツリー」に反映される（ <a href="#create_project05">図 1.5</a> ）。</p>
</li>
</ol>
</div>
<div id="create_project05" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-131907.png" alt="GSW 20220206 131907" width="75%">
</div>
<div class="title">図 1.5 プロジェクトファイル名が、プロジェクト名に反映された</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>astah* のプロジェクトの作り方についての詳しい説明は、機能ガイドの「プロジェクトの作成と利用」を参考にしてください。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">astah*  機能ガイド プロジェクトの作成と利用</dt>
<dd>
<p><code><a href="https://astah.change-vision.com/ja/manual/278-project-file.html" class="bare">https://astah.change-vision.com/ja/manual/278-project-file.html</a></code></p>
</dd>
</dl>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ボウリングのスコアのつけ方"><a class="anchor" href="#_ボウリングのスコアのつけ方"></a>1.4 ボウリングのスコアのつけ方</h3>
<div class="paragraph">
<p>ボウリング場では、だいぶ前（1980年代の終りくらい）から、スコアを自動計算してディスプレイに表示するシステムが使われるようになっています。
自動化される前は、受付でスコアシートをもらって、自分たちでスコアを計算し、手書きでスコアをつけていました（ <a href="#hand_scoring">図 1.6</a> ）。</p>
</div>
<div id="hand_scoring" class="imageblock">
<div class="content">
<img src="images/hand_scoring.jpg" alt="hand scoring" width="50%">
</div>
<div class="title">図 1.6 手でスコアを記入している様子</div>
</div>
<div class="paragraph">
<p>ボウリングの規則とスコアのつけ方について、公益財団法人「全日本ボウリング協会」の「ボウリング競技規則」を参考に、まとめてみました。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">公益財団法人「全日本ボウリング協会」のボウリング競技規則</dt>
<dd>
<p><code><a href="https://jbc-iwate.com/service/message/201012101.pdf" class="bare">https://jbc-iwate.com/service/message/201012101.pdf</a></code></p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_ボウリングスコアに使う記号"><a class="anchor" href="#_ボウリングスコアに使う記号"></a>1.4.1 ボウリングスコアに使う記号</h4>
<div class="paragraph">
<p>ボウリングスコアに使う記号と意味を <a href="#scoring_symbols">表 1.1</a> に示します。</p>
</div>
<table id="scoring_symbols" class="tableblock frame-all grid-all stretch">
<caption class="title">表 1.1 ボウリングスコアに使う記号と意味</caption>
<colgroup>
<col style="width: 8.8495%;">
<col style="width: 11.5044%;">
<col style="width: 79.6461%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">記号</th>
<th class="tableblock halign-left valign-top">名称</th>
<th class="tableblock halign-left valign-top">意味</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/strike.png" alt="strike" width="60">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ストライク</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1投目で10本全てを倒した場合。ストライクをだしたフレームの得点は、次の2投分を加算する。2回続いたら3フレーム目の1投目までを加算する。スコア欄は、それまでは空欄にしておく。ストライクが続くことを「ダブル」「トリプル（ターキー）」と呼ぶ。</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/spare.png" alt="spare" width="60">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">スペア</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1投目で残ったピンを、2投目で全部倒した場合。次の1投分を加算する。スコア欄は、それまでは空欄にしておく。</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/miss.png" alt="miss" width="60">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ミス</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">フレームの2投目でピンを1本も倒せなかった場合。2投目でガターに落ちても「G」の記号は使わずにこの記号を使う。そのフレームの得点は、1投目で倒したピン数になる。なお、1つのフレームで 2 回投球し、10本のピンを全部倒すことができなかった場合をエラーという。</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/gutter.png" alt="gutter" width="60">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ガター</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1投目でレーンの両脇にある溝（ガター）にボールが落ちた場合。2投目はガターに落ちた場合も「ミス」として扱う。</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/split.png" alt="split" width="60">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>スプリット</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1投目で1番ピン（ヘッドピンともいう）と他のいくつかのピンが倒れ、2 本以上のピンが次のような状態に残った場合。スプリットの場合は、1投目のピン数を○で囲む。</p>
<p class="tableblock">* 残っているピンの中間のピンが少なくとも1本倒れたとき。例えば7と9あるいは3と10。
* 残っているピンのすぐ前のピンが少なくとも1本倒れたとき。例えば5と6。</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="imageblock">
<div class="content">
<img src="images/foul.png" alt="foul" width="60">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファウル</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ファウルラインを越えて投球されたという記号。1投目でファウルした場合、ピンを倒しても1投目のピン数は0になる。2投目は全ピンを立て直す。2投目でファウルした場合、ピンを倒しても2投目のピン数は0になる。第10フレームの3投目がファウルの場合、ピンを倒しても3投目のピン数は0になる。</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="classic_scoring"><a class="anchor" href="#classic_scoring"></a>1.4.2 クラッシックスコアリング</h4>
<div class="paragraph">
<p>従来から使われていて、広く普及しているスコア計算方式です。</p>
</div>
<div class="exampleblock">
<div class="title">リスト 2. スコア計算の規定</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>ボウリングの1ゲームは、10 個のフレームをもって構成する。</p>
</li>
<li>
<p>競技者は、ストライクの場合を除き、それぞれのフレームで 2 回ずつ投球する。</p>
<div class="ulist">
<ul>
<li>
<p>ただし、第10フレームがストライクまたはスペアの場合、サービスフレームが追加される。</p>
</li>
<li>
<p>ストライクの場合は、サービスフレームで2回投球できる。</p>
</li>
<li>
<p>スペアの場合は、サービスフレームで1回投球できる。</p>
</li>
</ul>
</div>
</li>
<li>
<p>ゲームの成績は、10個のフレームの合計点によってこれを表す。</p>
<div class="ulist">
<ul>
<li>
<p>適正な投球によって倒されたピンの数をもって計算する。</p>
</li>
<li>
<p>適正に投球されたボールとは、競技者の持っているボールが、手から放れファウルラインを越えたものをいう。</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/classic_score_sample.jpg" alt="classic score sample" width="100%">
</div>
<div class="title">図 1.7 スコアの例（クラッシクスコアリングの場合）</div>
</div>
</div>
<div class="sect3">
<h4 id="_カレントフレームスコアリング"><a class="anchor" href="#_カレントフレームスコアリング"></a>1.4.3 カレントフレームスコアリング</h4>
<div class="paragraph">
<p>2018年アジア競技大会で採用された新しいスコア計算方式です。</p>
</div>
<div class="exampleblock">
<div class="title">リスト 3. クラッシックスコアリングと異なる点</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>1投目によって10ピンすべてを倒した場合はストライクとなる。ストライクのとき、そのフレームの得点は30となる。</p>
</li>
<li>
<p>続けて2回ストライクの場合は、それぞれのストライクの得点は30となる。</p>
</li>
<li>
<p>1投目の後、残ったピンを2投目によって全部倒した場合は、スペアとなる。スペアのとき、そのフレームの得点は、1投目のピン数に10を加えた数となる。</p>
</li>
<li>
<p>第10フレームでストライクあるいはスペアをとった場合も、3投目はない。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/current_frame_score_sample.jpg" alt="current frame score sample" width="100%">
</div>
<div class="title">図 1.8 スコアの例（カレントフレームスコアリングの場合）</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">【豆知識】ボウリングの名前の由来</div>
<div class="verseblock">
<pre class="content">「ボウリングをすること」などを意味する「bowl」という英語は、ラテン語で「泡」や「瘤」を意味する「bulla」に由来する。一方、同じ綴りで食器や容器（ボウル）を意味する「bowl」や「球」を意味する「ball」は、ゲルマン語に由来し、本質的に異なる。</pre>
<div class="attribution">
&#8212; Wikipedia
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>ボーリングのハンディキャップは、参加者が普段プレーしているときのアベレージ（平均スコア）を基に、力量に応じて設定するそうです。
このチュートリアルでは、ハンディキャップは取り扱わないでおきます。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_structure_design"><a class="anchor" href="#_structure_design"></a>2 スコアシートのデータ構造を調べる</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>ボウリングのゲームスコアを記録するスコアシートは、どのような要素で構成されているでしょうか。
また、それらの構成要素の間にはどのような関係があるのでしょうか。
構成要素や構成要素の関係を表すには「構造のモデル」を使います。
構造のモデルを使って、スコアシートの構成要素や、構成要素間の関係を検討してみましょう。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>このチュートリアルでは、クラッシックスコアリング（ <a href="#classic_scoring">1.4.2</a> ）の場合について考えることにします。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_スコアシートの構造をオブジェクト図で表す"><a class="anchor" href="#_スコアシートの構造をオブジェクト図で表す"></a>2.1 スコアシートの構造をオブジェクト図で表す</h3>
<div class="paragraph">
<p>スコアシートの例を参照しながら、スコアシートの構造を検討しましょう。</p>
</div>
<div class="sect3">
<h4 id="_スコアシートの例"><a class="anchor" href="#_スコアシートの例"></a>2.1.1 スコアシートの例</h4>
<div class="paragraph">
<p>ゲーム中のスコアシートの例を <a href="#scoresheet01">図 2.1</a> に示します。
この例では、2人でプレーしています。
いまは、2ゲーム目のプレー中で、1人目の6フレーム目の第1投目までゲームが進んでいます。
また、彼らは1フレームずつ交代で投球していることがわかります。
もし、彼らがもう1ゲーム分プレーする場合には、このスコアの下にもう一度2人分のスコアが追加されるでしょう。</p>
</div>
<div id="scoresheet01" class="imageblock">
<div class="content">
<img src="images/scoresheet02.png" alt="scoresheet02" width="100%">
</div>
<div class="title">図 2.1 スコアシートの例</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>ボウリングでは、「ゲーム」ということばは、各自が10フレーム分プレーした結果を指す場合と、複数名で10フレーム分プレーしたひと組の結果を指す場合があるようです。
これらを呼び分ける方法わからなかったので、このチュートリアルでは、前者を「スコア」、後者を「ゲーム」と呼ぶことにします。</p>
</div>
<div class="paragraph">
<p>実際のボウリング競技においてこれらを呼び分ける名前等をご存知の方は、そのを呼び分け方を使うとよいでしょう。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>スコアシートを観察してわかることを <a href="#scoresheet02">リスト4</a> にまとめました。</p>
</div>
<div id="scoresheet02" class="exampleblock">
<div class="title">リスト 4. スコアシートを観察してわかること</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>スコアシートには、プレー開始日時が記載されている。</p>
</li>
<li>
<p>スコアシートには、プレーヤー名とその人の10フレーム分の投球を記録する欄がある。</p>
<div class="ulist">
<ul>
<li>
<p>これをスコアと呼ぶことにする。</p>
</li>
</ul>
</div>
</li>
<li>
<p>ひとつのゲームの進行中は、1フレームごとにプレーヤーが交代して投球する。</p>
<div class="ulist">
<ul>
<li>
<p>この方式は、ベーカー方式と呼ばれている。</p>
</li>
</ul>
</div>
</li>
<li>
<p>スコアシートには、複数人のスコアが記録されている。</p>
<div class="ulist">
<ul>
<li>
<p>同時に進行している複数名のスコアのまとまりをゲームと呼ぶことにする。</p>
</li>
</ul>
</div>
</li>
<li>
<p>プレーヤーの組を単位として複数回ゲームをプレーできる。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p><a href="#scoresheet02">リスト4</a> にまとめたことを元に、スコアシートの構成要素や構成要素の間の関係をモデル図で表してみましょう。</p>
</div>
</div>
<div class="sect3">
<h4 id="_プロジェクトに設計モデルを追加する"><a class="anchor" href="#_プロジェクトに設計モデルを追加する"></a>2.1.2 プロジェクトに設計モデルを追加する</h4>
<div class="paragraph">
<p>まず、 astah* で作成したプロジェクトに設計モデルを追加しましょう。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
<div class="paragraph">
<p>ここでは、設計モデルは、対象とする業務やサービスに必要となる構成要素やその関係を「構造のモデル」（静的モデル）として表したものとします。
また、業務やサービスを実現するために必要となる構成要素の動作を「振舞いのモデル」（動的モデル）として表すことも含むものとします。
設計に関わる構成要素は、対象とする業務やサービスを分析して得られることもあれば、開発に採用する資源や方式から得られることもあります。</p>
</div>
</td>
</tr>
</table>
</div>
<div id="add_design_model" class="exampleblock">
<div class="title">リスト 5. プロジェクトに設計モデルを追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>プロジェクトにモデルを追加する。</p>
<div class="ulist">
<ul>
<li>
<p>構造ツリー上で、プロジェクトを選択する。</p>
</li>
<li>
<p>右クリックしてポップアップメニューを開き、「モデルの追加＞モデル」を選択する（ <a href="#add_design_model01">図 2.2</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_design_model01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-132000.png" alt="GSW 20220206 132000" width="75%">
</div>
<div class="title">図 2.2 プロジェクトにモデルを追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>追加したモデルに名前をつける。</p>
<div class="ulist">
<ul>
<li>
<p>構造ツリー上で、追加したモデルを選択した状態で、プロパティの「ベース」タブを選択する。</p>
</li>
<li>
<p>「名前」を編集して「設計モデル」とする（ <a href="#add_design_model02">図 2.3</a> ）。</p>
</li>
<li>
<p>入力が確定すると、構造ツリーの表示にも反映される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_design_model02" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-132154.png" alt="GSW 20220206 132154" width="75%">
</div>
<div class="title">図 2.3 モデルに設計用のモデルとして名前をつけた</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_設計モデルにオブジェクト図を追加する"><a class="anchor" href="#_設計モデルにオブジェクト図を追加する"></a>2.1.3 設計モデルにオブジェクト図を追加する</h4>
<div class="paragraph">
<p>「オブジェクト図（インスタンス図と呼ぶこともあります）」を使ってスコアシートに登場するオブジェクトを表してみましょう。
astah* では、オブジェクト図を作成するときは「クラス図」を使いますので、クラス図を追加しましょう。</p>
</div>
<div class="exampleblock">
<div class="title">リスト 6. 設計モデルにオブジェクト図を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>モデルにクラス図を追加する</p>
<div class="ulist">
<ul>
<li>
<p>構造ツリーから設計モデルを選択し、右クリックしてポップアップメニューを開く（ <a href="#object00">図 2.4</a> ）。</p>
</li>
<li>
<p>「図の追加＞クラス図」でクラス図が追加される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="object00" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-132218.png" alt="GSW 20220206 132218" width="75%">
</div>
<div class="title">図 2.4 モデルにクラス図を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>オブジェクト図に名前をつける</p>
<div class="ulist">
<ul>
<li>
<p>追加したクラス図のプロパティの「ベース」タブを開く。</p>
</li>
<li>
<p>名前を編集して「ゲームスコアのオブジェクト図」とする（  <a href="#object01">図 2.5</a> ）。</p>
</li>
<li>
<p>ダイアグラムエディタのタイトルやタブにも反映される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="object01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133044.png" alt="GSW 20220206 133044" width="75%">
</div>
<div class="title">図 2.5 図の名前を「ゲームスコアのオブジェクト図」にする</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクト図にスコアシートを追加する"><a class="anchor" href="#_オブジェクト図にスコアシートを追加する"></a>2.1.4 オブジェクト図にスコアシートを追加する</h4>
<div class="paragraph">
<p><a href="#scoresheet01">図 2.1</a> や <a href="#scoresheet02">リスト4</a> を参照しながら、スコアシートに記載されている要素をオブジェクト図に追加してみましょう。</p>
</div>
<div class="paragraph">
<p>まず、「スコアシート」オブジェクトを追加します。</p>
</div>
<div id="add_scoresheet01" class="exampleblock">
<div class="title">リスト 7. スコアシートを表すオブジェクトを追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットから「インスタンス仕様」を選択して、図に配置する（ <a href="#add_instance01">図 2.6</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>「インスタンス仕様0」という名前のオブジェクトが配置される（末尾の数字は作るたびに変わる）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_instance01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133142.png" alt="GSW 20220206 133142" width="75%">
</div>
<div class="title">図 2.6 インスタンス仕様を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>追加したオブジェクトの名前をスコアシートを表す固有の名前に変える。</p>
<div class="ulist">
<ul>
<li>
<p>オブジェクトを選択した状態でプロパティから編集する（ <a href="#obj_scoresheet01">図 2.7</a> ）。</p>
</li>
<li>
<p><a href="#scoresheet01">図 2.1</a> のスコアシートを示す固有の名前をつける。ここでは「scoresheet01」とした。</p>
</li>
<li>
<p>名前の入力が確定すると、オブジェクトの名前にも反映される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="obj_scoresheet01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133218.png" alt="GSW 20220206 133218" width="75%">
</div>
<div class="title">図 2.7 名前を「scoresheet01」に変更する</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
個々のオブジェクトを識別するためにつける名前のことを、オブジェクト名（またはインスタンス名）と呼びます。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_スコアシートオブジェクトにクラスを割り当てる"><a class="anchor" href="#_スコアシートオブジェクトにクラスを割り当てる"></a>2.1.5 スコアシートオブジェクトにクラスを割り当てる</h4>
<div class="paragraph">
<p>追加したオブジェクトは、どのようなクラスのオブジェクトなのか定まっていません。
それが分かるようクラスを定義して割り当てておきましょう。</p>
</div>
<div id="add_class_and_apply" class="exampleblock">
<div class="title">リスト 8. クラスを追加してオブジェクトに割り当てる</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>オブジェクト「scoresheet01」を選択した状態で、プロパティから「新規作成」ボタンをクリックする（ <a href="#class_def_dialog00">図 2.8</a> ）。</p>
</li>
</ol>
</div>
<div id="class_def_dialog00" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133232.png" alt="GSW 20220206 133232" width="75%">
</div>
<div class="title">図 2.8 オブジェクトを選択してクラスを「新規作成」する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>クラス「ScoreSheet」を定義する。</p>
<div class="ulist">
<ul>
<li>
<p>クラスを定義するダイアログが表示される（ <a href="#class_def_dialog01">図 2.9</a> ）。</p>
</li>
<li>
<p>「ベース」タブを選択し、名前に「ScoreSheet」を入力する。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class_def_dialog01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133247.png" alt="GSW 20220206 133247" width="50%">
</div>
<div class="title">図 2.9 クラス「ScoreSheet」を定義する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>スコアシートにはプレー開始日時があるので、これを属性に追加する。</p>
<div class="ulist">
<ul>
<li>
<p>「属性」タブを選択する。</p>
</li>
<li>
<p>「＋」ボタンを押すと属性が追加されるので、名前に「play_date」を入力する（ <a href="#add_attr_play_time">図 2.10</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_attr_play_time" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133548.png" alt="GSW 20220206 133548" width="50%">
</div>
<div class="title">図 2.10 属性「play_date」を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>属性「play_date」の型を定義する。</p>
<div class="ulist">
<ul>
<li>
<p>「型」欄を編集状態にして「Time」を入力すると、「型になるTimeを新規作成しますか？」というメッセージのダイアログが表示される（ <a href="#dialog_add_class_time">図 2.11</a> ）。</p>
</li>
<li>
<p>「はい」をクリックしてダイアログを閉じる。</p>
</li>
<li>
<p>クラス「Time」が作成され、構造ツリーにも追加される（ <a href="#class_time_added">図 2.12</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
「Time」クラスは、Rubyのライブラリで、日付と時刻を操作するためのクラスです。
</td>
</tr>
</table>
</div>
<div id="dialog_add_class_time" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-173841.png" alt="GSW 20220206 173841" width="50%">
</div>
<div class="title">図 2.11 クラス「Time」の追加を促すダイアログ</div>
</div>
<div id="class_time_added" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-172618.png" alt="GSW 20220206 172618" width="50%">
</div>
<div class="title">図 2.12 クラス「Time」が追加された</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>オブジェクト図や構造ツリーを確認する（ <a href="#instance03">図 2.13</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>「閉じる」をクリックして、クラス定義のダイアログを閉じる。</p>
</li>
<li>
<p>オブジェクトの表示が「scoresheet01 : ScoreSheet」に変わっている。</p>
</li>
<li>
<p>属性「play_date」の属性値を保持する欄（スロッと呼ぶ）も追加されている。</p>
</li>
<li>
<p>構造ツリーにもTimeクラスが追加されている。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="instance03" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133959.png" alt="GSW 20220206 133959" width="100%">
</div>
<div class="title">図 2.13 オブジェクトにクラスやスロットが割当てられた</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>追加したスロットに属性値を設定する（ <a href="#instance04">図 2.14</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>オブジェクト「scoresheet01」を選択して、プロパティから「ベース」タブを開く。</p>
</li>
<li>
<p>属性「play_date」の値に日時、たとえば「2022/02/04 16:18」などと入力する。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="instance04" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-181040.png" alt="GSW 20220206 181040" width="100%">
</div>
<div class="title">図 2.14 オブジェクトのスロットに属性値が追加された</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクト図にゲームを追加する"><a class="anchor" href="#_オブジェクト図にゲームを追加する"></a>2.1.6 オブジェクト図にゲームを追加する</h4>
<div class="paragraph">
<p>次に、「スコアシート」を追加したのと同じ手順で「ゲーム」オブジェクトを追加します。
<a href="#scoresheet01">図 2.1</a> の場合ゲームが2組あるので、ゲームのオブジェクトを「game01」、「game02」としましょう。
クラス名は「Game」としましょう。</p>
</div>
<div id="add_game00" class="exampleblock">
<div class="title">リスト 9. ゲームを表すオブジェクトを追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>最初の（1組目の）ゲームを追加する。
**. パレットから「インスタンス仕様」を選択して図に配置する。</p>
<div class="ulist">
<ul>
<li>
<p>オブジェクト名を「game01」とする。</p>
</li>
<li>
<p>クラスを追加して「Game」とする（ <a href="#add_game01">図 2.15</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_game01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-000330.png" alt="GSW 20220207 000330" width="100%">
</div>
<div class="title">図 2.15 ゲームを表すオブジェクト「game01」とクラス「Game」を追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>次の（2組目の）ゲームを追加する。</p>
<div class="ulist">
<ul>
<li>
<p>同様の手順で「game02」を追加する。</p>
</li>
<li>
<p>プロパティから既存のクラスをプルダウンし、「Game」クラスを選択する（ <a href="#add_game02">図 2.16</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_game02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-001520.png" alt="GSW 20220207 001520" width="100%">
</div>
<div class="title">図 2.16 ゲームを表すオブジェクトを追加し、既存のクラスを割当てた</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクト図にスコアを追加する"><a class="anchor" href="#_オブジェクト図にスコアを追加する"></a>2.1.7 オブジェクト図にスコアを追加する</h4>
<div class="paragraph">
<p>こんどは、プレーヤーひとり分のスコアを記録しているスコア部分を追加しましょう。
<a href="#scoresheet01">図 2.1</a> の場合、スコアは4つあります。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでは、プレーヤー名はスコアの属性と考えることにしておきます。
（もちろん、プレーヤーを独立したクラスと考え、複数のスコアとを関連づけた方がもっとよいでしょう）</p>
</div>
<div id="add_screr00" class="exampleblock">
<div class="title">リスト 10. それぞれのプレーヤーのスコアを表すオブジェクトを追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットから「インスタンス仕様」を選択して図に配置して「score01」とする。</p>
</li>
<li>
<p>「Score」クラスを追加して、「score01」に割当てる（ <a href="#add_score01">図 2.17</a> ）。</p>
</li>
</ol>
</div>
<div id="add_score01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-012006.png" alt="GSW 20220207 012006" width="100%">
</div>
<div class="title">図 2.17 スコアを表すオブジェクト「score01」を追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「Score」クラスに属性「player」を追加し、「String」クラスを追加して割当てる（ <a href="#add_string_class">図 2.18</a> ）。</p>
</li>
</ol>
</div>
<div id="add_string_class" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-011349.png" alt="GSW 20220207 011349" width="50%">
</div>
<div class="title">図 2.18 属性「Player」を追加し、クラス「String」を追加して割当てる。</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「score01」のスロット「player」の値に「くぼあき」を設定する（ <a href="#add_score02">図 2.19</a> ）。</p>
</li>
</ol>
</div>
<div id="add_score02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-014911.png" alt="GSW 20220207 014911" width="100%">
</div>
<div class="title">図 2.19 「player」のスロットの値にプレーヤー名を設定した</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ほかのスコアのオブジェクトも作成する（ <a href="#add_score03">図 2.20</a> ）</p>
</li>
</ol>
</div>
<div id="add_score03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-024336.png" alt="GSW 20220207 024336" width="100%">
</div>
<div class="title">図 2.20 残りのスコアのオブジェクトを作成した</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクト図にフレームを追加する"><a class="anchor" href="#_オブジェクト図にフレームを追加する"></a>2.1.8 オブジェクト図にフレームを追加する</h4>
<div class="paragraph">
<p>次に、各スコアに記載されているフレームを追加しましょう。
ですが、フレームのオブジェクトの数が多いので、この場で作成してみるのは一部だけにします。</p>
</div>
<div id="add_frame00" class="exampleblock">
<div class="title">リスト 11. それぞれのスコアのフレームを表すオブジェクトを追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットから「インスタンス仕様」を選択して図に配置して「frame0101」とする。</p>
</li>
<li>
<p>「Frame」クラスを追加して、「frame010」に割当てる（ <a href="#add_frame01">図 2.21</a> ）。</p>
</li>
<li>
<p>「Frame」クラスの属性に「frame_no」、「first」、「second」、「spare_bonus」、「strike_bonus」、「total」を追加する。</p>
</li>
</ol>
</div>
<div id="add_frame01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-030417.png" alt="GSW 20220207 030417" width="100%">
</div>
<div class="title">図 2.21 フレームを表すオブジェクト「frame01011」を追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>オブジェクト「frame0101」の各スロットに値を設定する（ <a href="#add_frame02">図 2.22</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>1組目のゲームの「くぼあき」さんの第1フレームは、1投目7ピン、2投目ミス（0ピン）。</p>
</li>
<li>
<p>第1フレームのトータルは7ピン。ボーナスはなし。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_frame02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-031606.png" alt="GSW 20220207 031606" width="100%">
</div>
<div class="title">図 2.22 オブジェクト「frame01011」の各スロットの値を設定した</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>同様にして、ほかのフレームのオブジェクトも作成する（ <a href="#add_frame03">図 2.23</a> ）。</p>
</li>
</ol>
</div>
<div id="add_frame03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-042412.png" alt="GSW 20220207 042412" width="100%">
</div>
<div class="title">図 2.23 残りのフレームのオブジェクトを作成した（一部だけ）</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクトのつながりを整理する"><a class="anchor" href="#_オブジェクトのつながりを整理する"></a>2.1.9 オブジェクトのつながりを整理する</h4>
<div class="paragraph">
<p>オブジェクト図に、スコアシート、ゲーム、スコアのオブジェクトが追加できました。
<a href="#scoresheet01">図 2.1</a> を見ながら、これらはの間にはどのようなつながりがあるか考えてみましょう。</p>
</div>
<div class="exampleblock">
<div class="title">リスト 12. オブジェクト同士のつながりを考える</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>スコアシートは複数のゲームを記録できるので、スコアシートとゲームにはつながりがありそうです。</p>
</li>
<li>
<p>ゲームでは、複数のプレーヤーのスコアを記録するので、ゲームとスコアにはつながりがありそうです。</p>
</li>
<li>
<p>スコアにはフレームごとのピン数等を記録するので、スコアとフレームにはつながりがありそうです。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>オブジェクトの間のつながりを表すには「リンク」を引きます。
つながりがありそうなオブジェクト同士にリンクを引いてみましょう。</p>
</div>
<div class="paragraph">
<p>まず、スコアシートとゲームの間にリンクを引きましょう。</p>
</div>
<div id="add_link00" class="exampleblock">
<div class="title">リスト 13. 「scoresheet01」から「game01」へリンクを引く</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットから「リンク」を選択して、「scoresheet01」の内部へマウスカーソルを移動し、青枠が表示されるのを待つ（ <a href="#add_link01">図 2.24</a> ）。</p>
</li>
</ol>
</div>
<div id="add_link01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-054611.png" alt="GSW 20220207 054611" width="100%">
</div>
<div class="title">図 2.24 リンクの引き始めのオブジェクトで青枠を表示させる</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>青枠が表示されたら、マウスのボタンを押したまま「game01」の内部へマウスカーソルを移動する（ <a href="#add_link02">図 2.25</a> ）。</p>
</li>
</ol>
</div>
<div id="add_link02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-061048.png" alt="GSW 20220207 061048" width="100%">
</div>
<div class="title">図 2.25 青枠が表示されたらマウスのボタンを押したままマウスカーソルをドラッグする</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「game01」にも青枠が表示されたら、マウスのボタンを離すとリンクが引かれる（ <a href="#add_link03">図 2.26</a> ）。</p>
</li>
</ol>
</div>
<div id="add_link03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-061016.png" alt="GSW 20220207 061016" width="100%">
</div>
<div class="title">図 2.26 リンク先のオブジェクトにも青枠が表示されたらマウスのボタンを離す</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「game02」へも同様の手順でリンクを引く。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>同様の手順で、ほかのオブジェクトの間にもリンクを引きます。</p>
</div>
<div id="add_link04" class="exampleblock">
<div class="title">リスト 14. ほかのオブジェクトの間にもリンクを引く</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ゲームからスコアへリンクを引く（ <a href="#add_link05">図 2.27</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>1ゲーム目のスコアは、1つ目のゲームにリンクを引く。</p>
</li>
<li>
<p>2ゲーム目のスコアは、1つ目のゲームにリンクを引く。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_link05" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-063524.png" alt="GSW 20220207 063524" width="100%">
</div>
<div class="title">図 2.27 ゲームからスコアへリンクを引く</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>スコアからフレームへもリンクを引く（ <a href="#add_link06">図 2.28</a> ）。</p>
</li>
</ol>
</div>
<div id="add_link06" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-065042.png" alt="GSW 20220207 065042" width="100%">
</div>
<div class="title">図 2.28 残りのつながりについてリンクを引く</div>
</div>
</div>
</div>
<div class="paragraph">
<p>これで、 <a href="#scoresheet01">図 2.1</a> の要素を反映したオブジェクト図が作成できました。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_スコアシートの構造をクラス図で表す"><a class="anchor" href="#_スコアシートの構造をクラス図で表す"></a>2.2 スコアシートの構造をクラス図で表す</h3>
<div class="paragraph">
<p>作成したオブジェクト図 <a href="#add_link06">図 2.28</a> を元に、ゲームスコアのクラス図を作成してみましょう。</p>
</div>
<div class="sect3">
<h4 id="_スコアシートのクラス図を追加する"><a class="anchor" href="#_スコアシートのクラス図を追加する"></a>2.2.1 スコアシートのクラス図を追加する</h4>
<div class="paragraph">
<p>まず、「ゲームスコアのクラス図」を追加します。</p>
</div>
<div id="class00" class="exampleblock">
<div class="title">リスト 15. ゲームスコアのクラス図を追加する</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>構造ツリーで、「設計モデル」でポップアップメニューを開き、「図の追加＞クラス図」でモデルにクラス図を追加する（ <a href="#class01">図 2.29</a> ）。</p>
</li>
</ul>
</div>
<div id="class01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-065747.png" alt="GSW 20220207 065747" width="50%">
</div>
<div class="title">図 2.29 モデルにクラス図を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>追加した図を「ゲームスコアのクラス図」とする（ <a href="#class02">図 2.30</a> ）。</p>
</li>
</ol>
</div>
<div id="class02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-065801.png" alt="GSW 20220207 065801" width="50%">
</div>
<div class="title">図 2.30 追加した図を「ゲームスコアのクラス図」とした</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_クラス図にクラスを追加する"><a class="anchor" href="#_クラス図にクラスを追加する"></a>2.2.2 クラス図にクラスを追加する</h4>
<div class="paragraph">
<p>「構造ツリー」をみると、オブジェクト図を作成したとき登録した「ScoreSheet」クラスや「Game」クラスなどが見つかります。
これらを1つずつドラッグ＆ドロップして、クラス図に追加します（ <a href="#class03">図 2.31</a>  ）。</p>
</div>
<div id="class03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-070838.png" alt="GSW 20220207 070838" width="100%">
</div>
<div class="title">図 2.31 既存のクラスを構造ツリーからクラス図に追加する</div>
</div>
</div>
<div class="sect3">
<h4 id="_クラス間の関連を追加する１"><a class="anchor" href="#_クラス間の関連を追加する１"></a>2.2.3 クラス間の関連を追加する（１）</h4>
<div class="paragraph">
<p>作成したオブジェクト図（ <a href="#add_link05">図 2.27</a> ）に記載されているリンクを参照して、リンクでつながっているオブジェクトが属するクラスの間に関連を引きます。</p>
</div>
<div class="paragraph">
<p>まず、「ScoreSheet」クラスから「Game」クラスへ向かって関連を引きましょう。</p>
</div>
<div id="add_relation00" class="exampleblock">
<div class="title">リスト 16. スコアシートとゲームの間に関連を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ScoreSheet」クラスから「Game」クラスへ関連を引く（ <a href="#class04">図 2.32</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>パレットから矢印付きの関連を選択する。</p>
</li>
<li>
<p>「ScoreSheet」クラスから「Game」クラスへ向かって関連を引く</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class04" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-082944.png" alt="GSW 20220207 082944" width="75%">
</div>
<div class="title">図 2.32 「ScoreSheet」クラスから「Game」クラスへ関連を引いた</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>スコアシートには1ゲーム以上の複数のゲームを記録できる。このことを多重度で表す。</p>
<div class="ulist">
<ul>
<li>
<p><a href="#class04">図 2.32</a> で引いた関連を選択した状態で、プロパティからターゲットが「Game」の関連端のタブを開く。</p>
</li>
<li>
<p>「多重度」を「1..*」に設定する（ <a href="#class05">図 2.33</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class05" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-083800.png" alt="GSW 20220207 083800" width="50%">
</div>
<div class="title">図 2.33 「ScoreSheet」からみた「Game」の多重度を「 1..* 」に設定した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>スコアシートがゲームを参照するときに使う名前を決めるために、関連端名を設定する。</p>
<div class="ulist">
<ul>
<li>
<p><a href="#class04">図 2.32</a> で引いた関連を選択した状態で、プロパティからターゲットが「Game」の関連端のタブを開く。</p>
</li>
<li>
<p>ゲームを複数回記録できることを反映して、「名前」を「games」に設定する（ <a href="#class06">図 2.34</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class06" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-084200.png" alt="GSW 20220207 084200" width="50%">
</div>
<div class="title">図 2.34 「ScoreSheet」からみた「Game」の関連端名を「games」に設定した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>スコアシートには、プレーヤーがゲームをやるたびにゲームを追加できる（スコアシートはゲームを集約しているが、互いのライフサイクルが異なる）ことを示すために、集約を設定する。</p>
<div class="ulist">
<ul>
<li>
<p><a href="#class04">図 2.32</a> で引いた関連を選択した状態で、プロパティからターゲットが「ScoreSheet」の関連端のタブを開く。</p>
</li>
<li>
<p>「集約」のプルダウンメニューから「aggregate」を選択する（ <a href="#class07">図 2.35</a>）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class07" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-085154.png" alt="GSW 20220207 085154" width="50%">
</div>
<div class="title">図 2.35 「ScoreSheet」が「Game」を集約していることを示した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「ScoreSheet」から「Game」への関連が引けた（ <a href="#class08">図 2.36</a> )。</p>
</li>
</ol>
</div>
<div id="class08" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-090055.png" alt="GSW 20220207 090055" width="75%">
</div>
<div class="title">図 2.36 「ScoreSheet」から「Game」への関連が引けた</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_クラス間の関連を追加する２"><a class="anchor" href="#_クラス間の関連を追加する２"></a>2.2.4 クラス間の関連を追加する（２）</h4>
<div class="paragraph">
<p>こんどは、「Game」クラスから「Score」クラスへ向かって関連を引きましょう。
1組のゲームには、複数プレーヤーのスコアが記録できます。
つまり、ここにはスコアシートとゲームの間と同じような関連が引けそうですね。</p>
</div>
<div id="add_relation02" class="exampleblock">
<div class="title">リスト 17. ゲームとスコアの間に関連を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「Game」クラスから「Score」クラスへ関連を引く。</p>
</li>
<li>
<p>「Score」クラス側の関連の多重度を「1..*」に設定する。</p>
</li>
<li>
<p>「Score」クラス側の関連端には関連端名として「scores」を設定する（複数のスコアが記録できることを反映した）。</p>
</li>
<li>
<p>「Game」クラス側の「集約」のプルダウンメニューから「aggregate」を選択する（ <a href="#add_relation03">図 2.37</a> ）。</p>
</li>
</ol>
</div>
<div id="add_relation03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-094813.png" alt="GSW 20220207 094813" width="100%">
</div>
<div class="title">図 2.37 ゲームとスコアの間に関連を引いた</div>
</div>
</div>
</div>
<div class="paragraph">
<p>そして、最後に、「Score」クラスから「Frame」クラスへ向かって関連を引きましょう。
このチュートリアルでは、スコアのオブジェクトを用意したときは、常に10フレーム分のフレームのオブジェクトも一緒に用意することとします。
この場合、フレームとスコアは同時に作成されるので（ライフサイクルが同じなので）、集約の設定もコンポジションにしておきます。</p>
</div>
<div id="add_relation04" class="exampleblock">
<div class="title">リスト 18. スコアとフレームの間に関連を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「Score」クラスから「Frame」クラスへ関連を引く。</p>
</li>
<li>
<p>「Frame」クラス側の関連端の多重度を「10」に設定する。</p>
</li>
<li>
<p>「Frame」クラス側の関連端には関連端名として「frames」を設定する（複数のフレームが記録できることを反映した）。</p>
</li>
<li>
<p>「Score」クラス側の関連端の集約を変更する。</p>
<div class="ulist">
<ul>
<li>
<p>集約のプルダウンメニューの中から「composite」を選択する（ <a href="#add_relation05">図 2.38</a> ）。</p>
</li>
<li>
<p>「Score」クラス側の関連端の表示が、黒塗りのダイアモンド（コンポジションのシンボル）に変わる。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_relation05" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-122557.png" alt="GSW 20220207 122557" width="100%">
</div>
<div class="title">図 2.38 スコアとフレームの間に関連を引いた</div>
</div>
</div>
</div>
<div class="paragraph">
<p>これで、いったん、ボウリングのゲームスコアを表した構造のモデルができました。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_まとめ"><a class="anchor" href="#_まとめ"></a>2.3 まとめ</h3>
<div class="paragraph">
<p>ボウリングのゲームスコアを記録するスコアシートの構造を検討しました。</p>
</div>
<div class="sect3">
<h4 id="_構造のモデルを作成した手順"><a class="anchor" href="#_構造のモデルを作成した手順"></a>2.3.1 構造のモデルを作成した手順</h4>
<div class="paragraph">
<p>構造のモデルに登場する構成要素や要素間の関連を見つけ出すために、 <a href="#step_for_structure_model">リスト19</a> のような手順を使いました。</p>
</div>
<div id="step_for_structure_model" class="exampleblock">
<div class="title">リスト 19. スコアシートの構造のモデルを作成した手順</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>スコアシートを観察して、どのような要素で構成されているか洗い出した。</p>
</li>
<li>
<p>スコアシートの実例をそのまま使ってオブジェクト図で表した。</p>
</li>
<li>
<p>オブジェクト図の要素や要素間のつながりを観察して、クラス図を作成した。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>まず、オブジェクト図をつくることで、オブジェクトを洗い出し、オブジェクト同士のつながり（リンク）を発見しました。
そして、オブジェクト図を参照しながら、クラス図を作成しました。
クラス間の関連の関連端名や多重度を検討する際は、オブジェクト図におけるリンクの数などを判断材料にしました。</p>
</div>
</div>
<div class="sect3">
<h4 id="_この段階の構造のモデルはまだ未完成"><a class="anchor" href="#_この段階の構造のモデルはまだ未完成"></a>2.3.2 この段階の構造のモデルはまだ未完成</h4>
<div class="paragraph">
<p>ここで作成したクラス図には、検討の余地が残っています。
たとえば、いずれのクラスにも操作が定義できていません。
これは、プレーするのに従ってスコアをつけるときの動作（振舞い）を検討していないからです。
また、動作を検討する中で、属性や関連についても追加や修正が必要になる場合があるでしょう。</p>
</div>
<div class="paragraph">
<p>このあと、振舞いのモデルを検討します。
振舞いのモデルの作成が進むにつれて、構造のモデルも追加・修正されることになるでしょう。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_model_to_code_design"><a class="anchor" href="#_model_to_code_design"></a>3 モデルとコードの対応づけ</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>プログラムがどのように動作するのか検討するときには、振舞いのモデルを使います。
振舞いのモデルを作成する前に、構造のモデルと振舞いのモデルがどのようなコードとして実現されるのかについて、このチュートリアルで用いる方式を決めておきましょう。
このことを「モデルとコードの対応づけ」と呼ぶことにします。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
このような対応づけを「モデル変換ルール」と呼ぶこともあります。また、開発プロセスのなかでこの対応づけを検討する「方式設計」と呼ぶ人もいます。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>モデルとコードの対応づけを決めてそれを前提にして設計する（モデルを作る）ことは、実装に依存する情報と依存しない情報を分離することを促すため、実装に依存しないモデルを作るのに役立ちます。</p>
</div>
<div class="sect2">
<h3 id="_対応づけ検討用モデルの作成"><a class="anchor" href="#_対応づけ検討用モデルの作成"></a>3.1 対応づけ検討用モデルの作成</h3>
<div class="paragraph">
<p>このチュートリアルでは実装にRubyを使うことにしました。
そこで、対応づけの方式を検討するために、サンプルモデルとサンプルモデルに対応するRubyプログラムを作ってみましょう。</p>
</div>
<div class="sect3">
<h4 id="_対応づけ検討用プロジェクトを用意する"><a class="anchor" href="#_対応づけ検討用プロジェクトを用意する"></a>3.1.1 対応づけ検討用プロジェクトを用意する</h4>
<div class="paragraph">
<p>「モデルとコードの対応づけ」の検討用に、astah* で別のプロジェクトを作成しましょう。</p>
</div>
<div class="exampleblock">
<div class="title">リスト 20. 対応づけ検討用プロジェクトを作成する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>astah* で新規プロジェクトを作成する。</p>
</li>
<li>
<p>作成したプロジェクトをいったん保存する。</p>
<div class="ulist">
<ul>
<li>
<p>モデルファイルの名前は「stm_sample.asta」とする。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>プロジェクトが保存できたら、プロジェクトにクラス図を追加します（ <a href="#add_stm_sample_class_diag">リスト21</a> ）。</p>
</div>
<div id="add_stm_sample_class_diag" class="exampleblock">
<div class="title">リスト 21. 対応づけ検討用プロジェクトにクラス図を用意する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>構造ツリーで、プロジェクト名をクリックしてポップアップメニューを開く。</p>
</li>
<li>
<p>「図の追加＞クラス図」でクラス図を追加する。</p>
</li>
<li>
<p>プロパティから、クラス図の名前を「クラス図」に変更する。</p>
</li>
</ol>
</div>
<div id="add_stm_sample00" class="imageblock">
<div class="content">
<img src="images/GSW-20220213-005309.png" alt="GSW 20220213 005309" width="50%">
</div>
<div class="title">図 3.1 対応づけの説明に使うプロジェクトにクラス図を追加した</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_クラスにステートマシン図を追加する"><a class="anchor" href="#_クラスにステートマシン図を追加する"></a>3.1.2 クラスにステートマシン図を追加する</h4>
<div class="paragraph">
<p>対応づけの説明用に、簡単なクラスの定義から始めましょう。</p>
</div>
<div id="add_sample_class00" class="exampleblock">
<div class="title">リスト 22. クラス図に「Sample」クラスを追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットからクラスを選択し、クラス図に追加する。</p>
</li>
<li>
<p>クラス名を「Sample」にする（ <a href="#sample_class01">図 3.2</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>クラスに操作「play」を追加する。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="sample_class01" class="imageblock">
<div class="content">
<img src="images/GSW-20220212-220754.png" alt="GSW 20220212 220754" width="75%">
</div>
<div class="title">図 3.2 クラス図に「Sample」クラスを追加した</div>
</div>
</div>
</div>
<div class="paragraph">
<p>このクラス図には、1つのクラス「Sample」とその操作「play」があるだけです。
これをRubyのコードで表すと <a href="#ruby_sample01">リスト23</a> のようになります。</p>
</div>
<div id="ruby_sample01" class="exampleblock">
<div class="title">リスト 23. 「Sample」クラスを表すRubyのコード</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ruby"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">class</span> <span class="nc">Sample</span>
  <span class="k">def</span> <span class="nf">play</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="c1"># do something </span><i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">end</span>
<span class="k">end</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>「Sample」クラスの操作「play」の定義。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>処理の詳細を表す図がないので、まだ処理内容は書けない。</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>このサンプルにおいては、いま追加した操作「play」が、「Sample」クラスの振舞いを提供しているとします。
しかし、クラスに操作「play」を追加しただけでは、その処理内容はわかりません。
どこかに「play」の処理内容を表した図を用意する必要がありそうです。</p>
</div>
<div class="paragraph">
<p>そこで、「Sample」クラスにステートマシン図を追加します。
図を追加する対象を「Sample」クラスにしているのは、このステートマシン図が「Sample」クラスの振舞いのモデル図であるとわかるようにするためです。</p>
</div>
<div id="add_stm_sample01" class="exampleblock">
<div class="title">リスト 24. 「Sample」クラスにステートマシン図を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>構造ツリーから「Sample」クラスを選択し、右クリックしてポップアップメニューを表示する（ <a href="#add_stm_sample02">図 3.3</a> ）。</p>
</li>
</ol>
</div>
<div id="add_stm_sample02" class="imageblock">
<div class="content">
<img src="images/GSW-20220213-020944.png" alt="GSW 20220213 020944" width="75%">
</div>
<div class="title">図 3.3 「Sample」クラスにステートマシン図を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「図の追加＞ステートマシン図」でステートマシン図が追加される。</p>
<div class="ulist">
<ul>
<li>
<p>プロパティから図の名前を編集し、「Sampleのplayのステートマシン図」とする（ <a href="#add_stm_sample03">図 3.4</a> ）。</p>
</li>
<li>
<p>ダイアグラムエディタのタイトルやタブにも反映される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_stm_sample03" class="imageblock">
<div class="content">
<img src="images/GSW-20220213-013034.png" alt="GSW 20220213 013034" width="75%">
</div>
<div class="title">図 3.4 追加したステートマシン図に名前をつけた。</div>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">ステートマシン図を学ぶチュートリアル</div>
<div class="paragraph">
<p>ここでは、モデルとコードの対応づけを説明するために、振舞いのモデルの一種であるステートマシン図を作成しています。
ステートマシン図を使って振舞いを設計する方法については、次のチュートリアルも参考にしてみてください。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ステートマシン図 &amp; 状態遷移表チュートリアル</dt>
<dd>
<p><code><a href="https://www.changevision.co/tutorial-statemachine-japanese.html" class="bare">https://www.changevision.co/tutorial-statemachine-japanese.html</a></code></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ステートマシン図に状態を追加する"><a class="anchor" href="#_ステートマシン図に状態を追加する"></a>3.1.3 ステートマシン図に状態を追加する</h4>
<div class="paragraph">
<p>次に、追加したステートマシン図に、状態を追加します。</p>
</div>
<div class="exampleblock">
<div class="title">リスト 25. ステートマシン図に状態を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットから「状態」を選択し、ステートマシン図に状態を追加する。</p>
<div class="ulist">
<ul>
<li>
<p>追加した状態の状態名は「状態0」（数字は追加の都度変わる）となっている（ <a href="#add_stm_sample04">図 3.5</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_stm_sample04" class="imageblock">
<div class="content">
<img src="images/GSW-20220213-093229.png" alt="GSW 20220213 093229" width="75%">
</div>
<div class="title">図 3.5 新しい状態を追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「状態0」を選択し、プロパティの「ベース」タブの「名前」を編集して、状態の名前を「ST0」にする（ <a href="#add_stm_sample05">図 3.6</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>状態「ST0」は、このサンプルの例示用に使う状態名のひとつ。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_stm_sample05" class="imageblock">
<div class="content">
<img src="images/GSW-20220213-104448.png" alt="GSW 20220213 104448" width="75%">
</div>
<div class="title">図 3.6 新しい状態に状態名をつけた</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>このサンプルでは3つの状態を使いたいので、状態をもう2つ追加する（ <a href="#add_stm_sample06">図 3.7</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>「ST1」、「ST2」を追加した。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_stm_sample06" class="imageblock">
<div class="content">
<img src="images/GSW-20220213-111820.png" alt="GSW 20220213 111820" width="75%">
</div>
<div class="title">図 3.7 新しい状態に状態名をつけた</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>開始疑似状態、終了疑似状態を追加した（ <a href="#add_stm_sample07">図 3.8</a> ）。</p>
</li>
</ol>
</div>
<div id="add_stm_sample07" class="imageblock">
<div class="content">
<img src="images/GSW-20220213-112341.png" alt="GSW 20220213 112341" width="75%">
</div>
<div class="title">図 3.8 開始疑似状態、終了疑似状態を追加した</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ステートマシン図に状態遷移を追加する"><a class="anchor" href="#_ステートマシン図に状態遷移を追加する"></a>3.1.4 ステートマシン図に状態遷移を追加する</h4>
<div class="paragraph">
<p>状態が追加できたので、こんどは状態遷移を追加しましょう。</p>
</div>
<div id="add_stm_trans00" class="exampleblock">
<div class="title">リスト 26. 状態遷移を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットから「遷移」を選択して、「開始疑似状態」の内部へマウスカーソルを移動し、青枠が表示されるのを待つ（ <a href="#add_stm_trans01">図 3.9</a> ）。</p>
</li>
</ol>
</div>
<div id="add_stm_trans01" class="imageblock">
<div class="content">
<img src="images/add_stm_transition_58.png" alt="add stm transition 58" width="75%">
</div>
<div class="title">図 3.9 開始疑似状態の内側で青枠を表示させる</div>
</div>
<div id="add_stm_trans02" class="imageblock">
<div class="content">
<img src="images/add_stm_transition_73.png" alt="add stm transition 73" width="75%">
</div>
<div class="title">図 3.10 青枠が表示されたらマウスのボタンを押したままマウスカーソルをドラッグする</div>
</div>
<div id="add_stm_trans03" class="imageblock">
<div class="content">
<img src="images/add_stm_transition_81.png" alt="add stm transition 81" width="75%">
</div>
<div class="title">図 3.11 「ST0」でも青枠が表示されたらマウスのボタンを離す</div>
</div>
<div id="add_stm_trans04" class="imageblock">
<div class="content">
<img src="images/add_stm_transition_215.png" alt="add stm transition 215" width="75%">
</div>
<div class="title">図 3.12 ほかの状態遷移も追加する</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ステートマシン図にイベントやアクションを追加する"><a class="anchor" href="#_ステートマシン図にイベントやアクションを追加する"></a>3.1.5 ステートマシン図にイベントやアクションを追加する</h4>
<div class="paragraph">
<p>ステートマシン図において、状態は「イベント」の発生を待っているところです。
たとえば、外部からの入力待ち（操作待ちや受信待ちなど）や時間の経過待ちなどが状態の候補で、操作や時間経過などがイベントになります。</p>
</div>
<div class="paragraph">
<p>状態遷移は、待っていたイベントが発生して、別の状態へ移ることを表しています。
イベントが発生したとき、実際に遷移するか判定する条件を追加できます。
この条件のことを「ガード条件」と呼びます。
ガード条件つきのイベントでは、イベントが発生したときにガード条件を評価し、条件が真なら状態遷移します。
ガード条件が偽のとき、状態は遷移しません。</p>
</div>
<div class="paragraph">
<p>そして、状態遷移には、イベントが発生したときに実行したい処理を追加できます。
この処理のことを「アクション（またはエフェクト）」と呼びます。
イベントが発生して（ガード条件があればそれが真であるなら）アクションが実行され、それから次の状態へ遷移します。</p>
</div>
<div class="paragraph">
<p>まず、「ST0」から「ST1」への状態遷移を、イベントが「ev1」でガード条件は「gd（が真）」のとき、アクション「act1」を実行するよう編集してみましょう。</p>
</div>
<div id="add_evt_act00" class="exampleblock">
<div class="title">リスト 27. 状態遷移にイベントやアクションを追加する（１）</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「ST0」から「ST1」への状態遷移を選択し、この遷移のプロパティを表示し、ベースタブを開く。</p>
</li>
<li>
<p>プロパティを編集する（ <a href="#add_evt_act01">図 3.13</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>「トリガー」にイベント名を設定する。ここでは「ev1」というイベントを設定する。</p>
</li>
<li>
<p>「ガード」にガード条件を設定する。ここでは「gd1（が真）」を設定しする。</p>
</li>
<li>
<p>「アクション」にアクションを設定する。ここでは「act1」という処理があるとして、これを設定する。</p>
<div class="ulist">
<ul>
<li>
<p>act1は、2つの引数（イベントとパラメータ）を持つメソッドと想定する。</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_evt_act01" class="imageblock">
<div class="content">
<img src="images/GSW-20220215-071155.png" alt="GSW 20220215 071155" width="75%">
</div>
<div class="title">図 3.13 「ST0」から「ST1」への状態遷移のイベントとアクションを編集する</div>
</div>
</div>
</div>
<div class="paragraph">
<p>次に、「ST1」からの「ST2」への遷移です。
この遷移に割り当てるイベントを「ev2」、アクションを「act2」とします。
そして、このアクションの実行後、ガード条件「gd2」が真なら「ST2」へ、偽ならアクション「act3」を実行してから「ST1」へ遷移するように変更してみます。
このように、同じイベントから遷移先が状況によって分かれる場合、これを新しい状態ととらえてしまうと別のイベントを待つ状況になってしまいます（1つのイベントで遷移できなくなります）。
このようなある状態遷移の遷移先が状況によって変わる場合には「選択疑似状態」を使います。</p>
</div>
<div id="add_evt_act02" class="exampleblock">
<div class="title">リスト 28. 状態遷移にイベントやアクションを追加する（２）</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットから「選択疑似状態」を選択し、ステートマシン図に追加する（ <a href="#add_evt_act03">図 3.14</a> ）。</p>
</li>
</ol>
</div>
<div id="add_evt_act03" class="imageblock">
<div class="content">
<img src="images/add_stm_trans45.png" alt="add stm trans45" width="75%">
</div>
<div class="title">図 3.14 「選択疑似状態」をステートマシン図に追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>「ST1」から「ST2」への状態遷移を選択し、「ST2」側のハンドル（丸印）をマウスでつまみ、「選択疑似状態」へつなぎ直す（ <a href="#add_evt_act04">図 3.15</a> ）。</p>
</li>
</ol>
</div>
<div id="add_evt_act04" class="imageblock">
<div class="content">
<img src="images/add_stm_trans120.png" alt="add stm trans120" width="75%">
</div>
<div class="title">図 3.15 既存の状態遷移を追加した「選択疑似状態」へつなぎ直す</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「選択疑似状態」から「ST0」と「ST2」への状態遷移を追加する（ <a href="#add_evt_act05">図 3.16</a> ）。</p>
</li>
</ol>
</div>
<div id="add_evt_act05" class="imageblock">
<div class="content">
<img src="images/add_stm_trans218.png" alt="add stm trans218" width="75%">
</div>
<div class="title">図 3.16 「選択疑似状態」から「ST0」と「ST2」への状態遷移を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>それぞれの遷移のプロパティを編集する（ <a href="#add_evt_act06">図 3.17</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>トリガーに「ev2」、ガード条件はなし、アクションを「act2」に設定する。</p>
</li>
<li>
<p>ガードにガード条件「!gd2（gd2ではない）」、アクションを「act3」に設定する。</p>
</li>
<li>
<p>ガードにガード条件「gd2」に設定する。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_evt_act06" class="imageblock">
<div class="content">
<img src="images/add_stm_trans589.png" alt="add stm trans589" width="75%">
</div>
<div class="title">図 3.17 状態遷移のイベントとアクションを編集する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>同様にして、あと2つほど状態遷移を追加する（ <a href="#add_evt_act07">図 3.18</a> ）。</p>
</li>
</ol>
</div>
<div id="add_evt_act07" class="imageblock">
<div class="content">
<img src="images/GSW-20220216-045358.png" alt="GSW 20220216 045358" width="75%">
</div>
<div class="title">図 3.18 さらに状態遷移とイベントとアクションを追加した</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_追加したイベントやアクションをクラス図に反映する"><a class="anchor" href="#_追加したイベントやアクションをクラス図に反映する"></a>3.1.6 追加したイベントやアクションをクラス図に反映する</h4>
<div class="paragraph">
<p>ステートマシン図を作成するときに追加したアクションは、このステートマシン図を割り当てているクラス（ここでは「Sample」クラス）の操作にしておきましょう。</p>
</div>
<div id="update_sample_class00" class="exampleblock">
<div class="title">リスト 29. 「Sample」クラスを更新する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>クラス図を開く。</p>
</li>
<li>
<p>「Sample」クラスクを選択し、プロパティから「操作」タブを表示する。</p>
</li>
<li>
<p>「＋」アイコンを使って操作「act1」を追加する。</p>
</li>
<li>
<p>「act1」はクラス内部で使う操作なので、可視性を「private」にしておく。</p>
</li>
<li>
<p>「act2」、「act3」についても同じように設定する（ <a href="#update_sample_class01">図 3.19</a> ）。</p>
</li>
</ol>
</div>
<div id="update_sample_class01" class="imageblock">
<div class="content">
<img src="images/GSW-20220216-050914.png" alt="GSW 20220216 050914" width="75%">
</div>
<div class="title">図 3.19 「Sample」クラス内部で使う操作を追加する</div>
</div>
</div>
</div>
<div class="paragraph">
<p>作成したステートマシン図をテストするメソッドを持つ「SampleTest」クラスも用意しておきましょう。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
クラスや操作の追加方法はこれまでと同様ですので、今後は簡単な手順だけを示します。
</td>
</tr>
</table>
</div>
<div id="update_sample_class02" class="exampleblock">
<div class="title">リスト 30. 「SampleTest」クラスを追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットからクラスを選択し、クラス図に追加する。</p>
</li>
<li>
<p>クラス名を「SampleTest」クラスとする（ <a href="#update_sample_class03">図 3.20</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>テストを実行する操作を追加する。ここでは「run」としておく。</p>
</li>
<li>
<p>個々のテストを記載するための操作を追加する。ここでは「test01」などとして必要な都度追加する。</p>
</li>
<li>
<p>「SampleTest」から「Sample」へ矢印つきの関連を引く。</p>
</li>
<li>
<p>関連端名は「sample01」、多重度は「1」としておく</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="update_sample_class03" class="imageblock">
<div class="content">
<img src="images/GSW-20220217-154145.png" alt="GSW 20220217 154145" width="75%">
</div>
<div class="title">図 3.20 「SampleTest」クラスを追加する</div>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">列挙型（enum）をクラス図に反映する方法について</div>
<div class="paragraph">
<p>Rubyにはenumのような列挙子を直接定義する方法がないので、このチュートリアルの簡単のために、状態を表す定数を定義するために「シンボル（:ST0など）」を使いました。</p>
</div>
<div class="paragraph">
<p>astah* は、Java, C#、C++ については、enumを設定する方法を提供していますので、その方法で代用してもよいでしょう。</p>
</div>
<div class="paragraph">
<p>詳しい設定方法については、次の記事を参考にしてみてください。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Java、enumの設定</dt>
<dd>
<p><code><a href="http://astah-users.change-vision.com/ja/modules/xhnewbb/viewtopic.php?topic_id=1249" class="bare">http://astah-users.change-vision.com/ja/modules/xhnewbb/viewtopic.php?topic_id=1249</a></code></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">モデル変換とモデル駆動開発（MDD）</div>
<div class="paragraph">
<p>ここで示したようなモデルとコードの対応づけのほかに、モデルから別のモデルへ、あるいはコードから別のコードへといった対応づけも考えられます。
これらは、ソフトウェア設計における「モデル変換」と呼ばれています（コードも一種のモデル表現とみなせます）。
そして、モデル変換を用いて開発プロセスにおける各工程間をモデルで接続して開発する方法のことを「モデル駆動開発（MDD: Model Driven Development）」と呼びます。</p>
</div>
<div class="paragraph">
<p>モデル駆動開発を紹介している記事として次の記事があります。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">モデル駆動開発におけるモデル変換の役割</dt>
<dd>
<p><code><a href="https://codezine.jp/article/detail/10597" class="bare">https://codezine.jp/article/detail/10597</a></code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>この記事では、モデル変換の繰り返しによる開発方法であることや、その実施例を紹介しています。</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_変換ルールを使ってコードを作成する"><a class="anchor" href="#_変換ルールを使ってコードを作成する"></a>3.2 変換ルールを使ってコードを作成する</h3>
<div class="sect3">
<h4 id="_クラスとコードの対応"><a class="anchor" href="#_クラスとコードの対応"></a>3.2.1 クラスとコードの対応</h4>

</div>
<div class="sect3">
<h4 id="_関連とコードの対応"><a class="anchor" href="#_関連とコードの対応"></a>3.2.2 関連とコードの対応</h4>

</div>
<div class="sect3">
<h4 id="_状態とコードの対応"><a class="anchor" href="#_状態とコードの対応"></a>3.2.3 状態とコードの対応</h4>

</div>
<div class="sect3">
<h4 id="_状態遷移やアクションとコードの対応"><a class="anchor" href="#_状態遷移やアクションとコードの対応"></a>3.2.4 状態遷移やアクションとコードの対応</h4>

</div>
</div>
<div class="sect2">
<h3 id="_まとめ_2"><a class="anchor" href="#_まとめ_2"></a>3.3 まとめ</h3>
<div class="paragraph">
<p>クラス図とステートマシン図で動作を表現すれば、Rubyのコードに変換できることがわかりました。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_スコアを記録する動作をモデルで表す"><a class="anchor" href="#_スコアを記録する動作をモデルで表す"></a>4 スコアを記録する動作をモデルで表す</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>コードに変換する方法が手に入りました。
つまり、ゲームスコアを記録するRubyのコードを得るには、ゲームスコアを記録する動作をクラス図とステートマシン図で表せればよいわけです。</p>
</div>
<div class="sect2">
<h3 id="_フレームの状態について検討する"><a class="anchor" href="#_フレームの状態について検討する"></a>4.1 フレームの状態について検討する</h3>
<div class="paragraph">
<p><a href="#scoresheet01">図 2.1</a> を見ると、ゲームの進行状況によってフレームが提示する情報には <a href="#frama_differences">リスト31</a> のような違いがあります。</p>
</div>
<div id="frama_differences" class="exampleblock">
<div class="title">リスト 31. フレームの提示する情報の違い</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>まだプレーしていないフレーム</p>
</li>
<li>
<p>1投目の投球を待っているフレーム</p>
</li>
<li>
<p>2投目の投球を待っているフレーム</p>
</li>
<li>
<p>2投目が投球されて獲得ピン数が確定したフレーム</p>
</li>
<li>
<p>ストライクのボーナスが確定しないフレーム</p>
</li>
<li>
<p>スペアのボーナスが確定しないフレーム</p>
</li>
<li>
<p>スペアまたはストライクのボーナスが確定したフレーム</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_まだプレーしていないフレーム"><a class="anchor" href="#_まだプレーしていないフレーム"></a>4.1.1 まだプレーしていないフレーム</h4>
<div class="paragraph">
<p>まだプレーしてないフレームは、フレームの最初の状態です（ <a href="#reserved01">図 4.1</a> ）。
このフレームは、ピン数の入力を待っていません。</p>
</div>
<div id="reserved01" class="imageblock">
<div class="content">
<img src="images/reserved.png" alt="reserved" width="75%">
</div>
<div class="title">図 4.1 まだプレーしていないフレーム</div>
</div>
</div>
<div class="sect3">
<h4 id="_1投目の投球を待っているフレーム"><a class="anchor" href="#_1投目の投球を待っているフレーム"></a>4.1.2 1投目の投球を待っているフレーム</h4>
<div class="paragraph">
<p>現在プレー中のフレームで、まだ1投目が投球されていない状態のフレームです（ <a href="#before_1st01">図 4.2</a> ）。
次にピン数を受け取ると、このフレームの1投目に記録されます。</p>
</div>
<div id="before_1st01" class="imageblock">
<div class="content">
<img src="images/before_1st.png" alt="before 1st" width="75%">
</div>
<div class="title">図 4.2 1投目の投球を待っているフレーム</div>
</div>
</div>
<div class="sect3">
<h4 id="_2投目の投球を待っているフレーム"><a class="anchor" href="#_2投目の投球を待っているフレーム"></a>4.1.3 2投目の投球を待っているフレーム</h4>
<div class="paragraph">
<p>現在プレー中のフレームで、1投目がストライクでなかったときに2投目を待っている状態のフレームです（ <a href="#before_2nd01">図 4.3</a> ）。
次にピン数を受け取ると、このフレームの2投目に記録されます。</p>
</div>
<div id="before_2nd01" class="imageblock">
<div class="content">
<img src="images/before_2nd.png" alt="before 2nd" width="75%">
</div>
<div class="title">図 4.3 2投目の投球を待っているフレーム</div>
</div>
</div>
<div class="sect3">
<h4 id="_スペアのボーナスの確定待ちのフレーム"><a class="anchor" href="#_スペアのボーナスの確定待ちのフレーム"></a>4.1.4 スペアのボーナスの確定待ちのフレーム</h4>
<div class="paragraph">
<p>現在プレー中のフレームの前のフレームがスペアで、現在のフレームが1投目の投球を待っているとき、前のフレームはスペアボーナスの確定待ちの状態です（ <a href="#pending_spare01">図 4.4</a> ）。
次にピン数を受け取ると、このフレームの1投目に記録されるとともに、前のフレームのスペアボーナスが確定します。</p>
</div>
<div id="pending_spare01" class="imageblock">
<div class="content">
<img src="images/pending_spare.png" alt="pending spare" width="75%">
</div>
<div class="title">図 4.4 スペアのボーナスの確定待ちのフレーム</div>
</div>
</div>
<div class="sect3">
<h4 id="_ストライクのボーナスの確定待ちのフレーム"><a class="anchor" href="#_ストライクのボーナスの確定待ちのフレーム"></a>4.1.5 ストライクのボーナスの確定待ちのフレーム</h4>
<div class="paragraph">
<p>ストライクボーナスの確定待ちには2通りの場合があります。</p>
</div>
<div class="paragraph">
<p>まず、現在プレー中のフレームの前のフレームがストライクで、現在のフレームが2投目の投球を待っているときです。
このとき、前のフレームはストライクボーナスの確定待ちの状態です（ <a href="#pending_strike01">図 4.5</a> ）。
次にピン数を受け取ると、このフレームの2投目に記録されるとともに、前のフレームのストライクボーナスが確定します。</p>
</div>
<div id="pending_strike01" class="imageblock">
<div class="content">
<img src="images/pending_strike.png" alt="pending strike" width="75%">
</div>
<div class="title">図 4.5 ストライクのボーナスの確定待ちのフレーム（次がストライクでない）</div>
</div>
<div class="paragraph">
<p>いまひとつは、現在プレー中のフレームが1投目の投球を待っていて、前のフレームと前の前のフレームがともにストライクであったとき（ダブルのとき）ときです。
このとき、前の前のフレームはストライクボーナスの確定待ちの状態です（ <a href="#pending_double01">図 4.6</a> ）。
次にピン数を受け取ると、このフレームの1投目に記録されるとともに、前の前のフレームのストライクボーナスが確定します。</p>
</div>
<div id="pending_double01" class="imageblock">
<div class="content">
<img src="images/pending_double.png" alt="pending double" width="75%">
</div>
<div class="title">図 4.6 ストライクのボーナスの確定待ちのフレーム（次がストライク）</div>
</div>
</div>
<div class="sect3">
<h4 id="_獲得ピン数とボーナスが確定したフレーム"><a class="anchor" href="#_獲得ピン数とボーナスが確定したフレーム"></a>4.1.6 獲得ピン数とボーナスが確定したフレーム</h4>
<div class="paragraph">
<p>現在のフレームがスペアやストライクにならなかったとき、そのフレームはボーナスの確定待ちにならず、この段階でそのフレームのトータル（ボーナスなしの獲得ピン数）が確定します。</p>
</div>
<div class="paragraph">
<p>スペアボーナスの確定待ち、またはストライクボーナスの確定待ちのフレームは、後のフレームの投球によってボーナスが確定すると、フレームのトータルが確定します。
このとき、確定待ちのフレームでは、そのフレームの獲得ピン数と確定したボーナスの合計がそのフレームのトータルになります。</p>
</div>
<div class="paragraph">
<p>フレームのトータルが求められると、それ以前のフレームまでの「延べのトータル」にそのフレームのトータルを加算して、延べのトータルを更新します。そして、更新した延べのトータルがフレームの下部に記録されます（ <a href="#fixed01">図 4.7</a> ）。</p>
</div>
<div id="fixed01" class="imageblock">
<div class="content">
<img src="images/fixed01.png" alt="fixed01" width="75%">
</div>
<div class="title">図 4.7 2投目を投球して、ピン数が確定したフレーム（のべのトータルが求められている）</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_フレームの状態をステートマシン図で表す"><a class="anchor" href="#_フレームの状態をステートマシン図で表す"></a>4.2 フレームの状態をステートマシン図で表す</h3>
<div class="paragraph">
<p>フレームの状態を検討した結果、フレームはいくつかの状態を持つことがわかりました。
フレームが表示できる情報も、状態によって異なることがわかりました。
このことを、図に表してみましょう。
状態とその変化（状態遷移と呼びます）を表すには、ステートマシン図を使います。</p>
</div>
<div class="sect3">
<h4 id="_フレームクラスにステートマシン図を追加する"><a class="anchor" href="#_フレームクラスにステートマシン図を追加する"></a>4.2.1 フレームクラスにステートマシン図を追加する</h4>
<div class="paragraph">
<p>「Frame」クラスの状態を表す図を描きたいので、「Frame」クラスに図を追加しましょう。</p>
</div>
<div id="add_frame_stm00" class="exampleblock">
<div class="title">リスト 32. フレームクラスにステートマシン図を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「Frame」クラスにステートマシン図を追加する</p>
<div class="ulist">
<ul>
<li>
<p>構造ツリーから「Frame」クラスを選択し、右クリックしてポップアップメニューを表示する（ <a href="#add_frame_stm01">図 4.8</a> ）。</p>
</li>
<li>
<p>「図の追加＞ステートマシン図」でステートマシン図が追加される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_frame_stm01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-154421.png" alt="GSW 20220207 154421" width="75%">
</div>
<div class="title">図 4.8 フレームクラスにステートマシン図を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>ステートマシン図に名前をつける</p>
<div class="ulist">
<ul>
<li>
<p>追加したステートマシン図のプロパティの「ベース」を開く。</p>
</li>
<li>
<p>名前を編集して「Frameクラスのステートマシン図」とする（ <a href="#add_frame_stm02">[add_frame_stm02]</a> ）。</p>
</li>
<li>
<p>ダイアグラムエディタのタイトルやタブにも反映される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ステートマシン図に状態を追加する_2"><a class="anchor" href="#_ステートマシン図に状態を追加する_2"></a>4.2.2 ステートマシン図に状態を追加する</h4>
<div class="paragraph">
<p>ステートマシン図に、フレームの状態を追加しましょう。</p>
</div>
<div id="add_frame_state00" class="exampleblock">
<div class="title">リスト 33. ステートマシン図にフレームの状態を追加する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>パレットから「開始疑似状態」を選択し、ステートマシン図に追加する。</p>
</li>
<li>
<p>パレットから「状態」を選択し、ステートマシン図に追加する。</p>
</li>
<li>
<p>「まだプレーしていないフレーム」を「RESERVED」という名前にする。</p>
</li>
<li>
<p>パレットから「遷移」を選択して、「開始疑似状態」から「RESERVED」へ遷移を引く（ <a href="#frame_state01">図 4.9</a> ）。</p>
</li>
</ol>
</div>
<div id="frame_state01" class="imageblock">
<div class="content">
<img src="images/GSW-20220209-152917.png" alt="GSW 20220209 152917" width="100%">
</div>
<div class="title">図 4.9 状態の追加（１）</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「1投目の投球を待っているフレーム」を「BEFORE_1ST」という名前にする。</p>
</li>
<li>
<p>「BEFORE_1ST」という状態名の状態を追加する。</p>
</li>
</ol>
</div>
<div id="frame_stm02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-155242.png" alt="GSW 20220207 155242" width="100%">
</div>
<div class="title">図 4.10 状態の追加（２）</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「2投目の投球を待っているフレーム」を「BEFORE_2ND」</p>
</li>
<li>
<p>「スペアのボーナスの確定待ちのフレーム」と「ストライクのボーナスの確定待ちのフレーム」を「PENDING」</p>
</li>
<li>
<p>「獲得ピン数とボーナスが確定したフレーム」を表す「FIXED」</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_サービスフレームの扱いについて検討する"><a class="anchor" href="#_サービスフレームの扱いについて検討する"></a>4.3 サービスフレームの扱いについて検討する</h3>
<div class="paragraph">
<p>「クラッシックスコアリング」の場合、第10フレームが他のフレームとは異なっています。
サービスフレームという考え方があり、ストライクやスペアの場合に追加で投球できます。</p>
</div>
<div class="paragraph">
<p>このサービスフレームの扱い方にについて整理しておきましょう。</p>
</div>
<div class="sect3">
<h4 id="_第10フレームがストライクもスペアもない場合"><a class="anchor" href="#_第10フレームがストライクもスペアもない場合"></a>4.3.1 第10フレームがストライクもスペアもない場合</h4>
<div class="paragraph">
<p>第10フレームがストライクでもスペアもない場合、サービスフレームは提供されません。
第9フレームまでの通常のフレームと同様、1投目と2投目を記録するだけです（ <a href="#ten_no_service">図 4.11</a>  ）。</p>
</div>
<div id="ten_no_service" class="imageblock">
<div class="content">
<img src="images/ten_no_service_combo.png" alt="ten no service combo" width="75%">
</div>
<div class="title">図 4.11 第10フレームがストライクもスペアもない場合</div>
</div>
</div>
<div class="sect3">
<h4 id="_第10フレームがスペアの場合"><a class="anchor" href="#_第10フレームがスペアの場合"></a>4.3.2 第10フレームがスペアの場合</h4>
<div class="paragraph">
<p>第10フレームの2投目でスペアになった場合、1投目と2投目を通常のフレームと同様に記録したのち、もう1投追加されます。
これを、第10フレームに加えて、第11フレームの1投目が追加されたとみなします。
つまり、ゲームスコアのデータを「 <a href="#ten_spare_service">図 4.12</a> 」のように構成します。</p>
</div>
<div id="ten_spare_service" class="imageblock">
<div class="content">
<img src="images/ten_spare_combo.png" alt="ten spare combo" width="75%">
</div>
<div class="title">図 4.12 第10フレームがスペアの場合（第11フレームの2投目はない）</div>
</div>
<div class="paragraph">
<p>スコアをこのように構成しておくと、第10フレームの場合も、通常フレームの組み合わせによってボーナスが計算できます。
ゲーム終了時の第10フレームのスコア（ピン数に以後の投球によるボーナスを加えたスコア）を取得するとそれがゲームのスコアになります。</p>
</div>
</div>
<div class="sect3">
<h4 id="_第10フレームの1投目がストライクの場合"><a class="anchor" href="#_第10フレームの1投目がストライクの場合"></a>4.3.3 第10フレームの1投目がストライクの場合</h4>
<div class="paragraph">
<p>第10フレームの1投目がストライクの場合、第10フレームをストライクとした上で、もう2投追加されます。
これを、第10フレームに加えて、第11フレームの1投目と2投目が追加されたとみなします。
つまり、ゲームスコアのデータを「 <a href="#ten_one_strike_service">図 4.13</a> 」のように構成します。
だたし、第11フレームの1投目がストライクの場合は、同じ2投追加でも次の「2投目もストライクの場合」の考え方を使います。</p>
</div>
<div id="ten_one_strike_service" class="imageblock">
<div class="content">
<img src="images/ten_one_strike_combo.png" alt="ten one strike combo" width="75%">
</div>
<div class="title">図 4.13 第10フレームの1投目がストライクの場合</div>
</div>
<div class="paragraph">
<p>スコアをこのように構成しておくと、第10フレームの場合も、通常フレームの組み合わせによってボーナスが計算できます。
ゲーム終了時の10フレームのスコア（ピン数に以後の投球によるボーナスを加えたスコア）を取得するとそれがゲームのスコアになります。</p>
</div>
</div>
<div class="sect3">
<h4 id="_第10フレームの2投目もストライクの場合"><a class="anchor" href="#_第10フレームの2投目もストライクの場合"></a>4.3.4 第10フレームの2投目もストライクの場合</h4>
<div class="paragraph">
<p>第10フレームの2投目もストライクの場合、第10フレーム、第11フレームをストライクとした上で、もう1投追加されます。
これを、第10フレーム、第11フレームに加えて、第12フレーム目の1投目が追加されたとみなします。
つまり、ゲームスコアのデータを「 <a href="#ten_two_strike_service">図 4.14</a> 」のように構成します。
このように構成すれば、通常のフレームでダブルをとったときの計算方法（ストライクが続いたときはさらに次のフレームの1投目が2投目として加算される）のままで第10フレームのボーナスが計算できます。</p>
</div>
<div id="ten_two_strike_service" class="imageblock">
<div class="content">
<img src="images/ten_two_strike_combo.png" alt="ten two strike combo" width="75%">
</div>
<div class="title">図 4.14 第10フレームの2投目もストライクの場合</div>
</div>
<div class="paragraph">
<p>スコアをこのように構成しておくと、第10フレームの場合も、通常フレームの組み合わせによってボーナスが計算できます。
ゲーム終了時の10フレームのスコア（ピン数に以後の投球によるボーナスを加えたスコア）を取得するとそれがゲームのスコアになります。</p>
</div>
</div>
<div class="sect3">
<h4 id="_クラス図に検討結果を反映する"><a class="anchor" href="#_クラス図に検討結果を反映する"></a>4.3.5 クラス図に検討結果を反映する</h4>
<div class="paragraph">
<p>第10フレームの場合にもサービスフレームのために追加のフレームを用意することで、通常フレームと同じようにピン数やボーナスを扱えるようになりました。</p>
</div>
<div class="paragraph">
<p>クラス図にこの結果を反映しましょう。</p>
</div>
<div id="add_service_frame" class="exampleblock">
<div class="title">リスト 34. クラス図にサービスフレームを検討結果を反映する</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>「Frame」クラス側の関連端の多重度を「10」から「12」に変更する。</p>
</li>
<li>
<p>関連にノートをつけて説明をつけておく。</p>
<div class="ulist">
<ul>
<li>
<p>パレットからノートを選択し、クラス図に追加する。</p>
</li>
<li>
<p>ノートに「Frame側の多重度は、サービスフレーム用に必要なフレーム分だけ追加してある」という説明を追加する。</p>
</li>
</ul>
</div>
</li>
<li>
<p>ノートから関連の線に向かってアンカーを引く。</p>
<div class="ulist">
<ul>
<li>
<p>パレットからノートのアンカーを選択し、ノートにマウスカーソルを移動して青枠が表示されるのを待つ。</p>
</li>
<li>
<p>マウスのボタンを押したまま、マウスカーソルをドラッグし、関連の線に近づけ青枠が表示されるのを待つ。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
ノート内の文章を編集するときは、ノートを選択した状態でプロパティを使って編集すると、改行の入力が容易になります。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ゲームの進行について検討する"><a class="anchor" href="#_ゲームの進行について検討する"></a>4.4 ゲームの進行について検討する</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>5 まとめ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルでは、ボーリングスコアのモデルを作ることを通して、ソフトウェアの開発にモデルを使うことについて学びました。また、UMLが、そのようなときに役立つ記法であることも実感できたのではないでしょうか。
ソフトウェアの開発にモデルを活用するときは、記法やツールも欠かせません。このチュートリアルでは、モデル図を描くのに astah* を使いました。ですが、このチュートリアルをやったみなさんは、記法やツールがあればモデルが作れるわけではないことに気づいたのではないでしょうか。</p>
</div>
<div class="paragraph">
<p>まず、このチュートリアルでは、ボーリングスコアのモデルをいきなり作るのではなく、「誰のどんな問題か」を確認することから始めました。現実的には、ボーリングスコアのような自明なよく知られた問題であれば、そのようなことをいちいち議論する必要はないでしょう。
しかし、システム開発案件の多くは、どのように対処すればよいのかわかっていない問題を抱えています（だからこそ、そこが開発案件になるわけですよね）。
このチュートリアルでは、そのようなときに問題を表すモデルを作るのと同じように、ボーリングスコアの記録に関わる領域をモデルで表すところから始めました。</p>
</div>
<div class="paragraph">
<p>みなさんのなかには、UMLの考え方や記法に慣れていないだけで、モデル化して考えることには慣れている人もいるでしょう。そのような人は、こんどは、自分たちがすでにモデル化している図や文書をUMLを使って表してみるとよいでしょう。</p>
</div>
<div class="paragraph">
<p>あるいは、すでに作りたいもの（あるいは解決したい課題）はわかってきているものの、それがどのような課題でどのように解決すればよいのかといったことを、うまく表せずに困っている人もいるでしょう。そのような人は、みなさんの課題（を含む現状）をモデル図で表してみるとよいでしょう。これを「As Isのモデル」と呼びます。そして、浮き彫りになった問題を、そのモデルを出発点として解消したモデルを作ります。これを「To Beのモデル」と呼びます。課題を解決したシステムは、To Be のモデルを元に設計、実装します。このような方法で、問題解決にモデルを活用してみることにチャレンジしてみてください。</p>
</div>
<div class="paragraph">
<p>みなさんがこれまで以上にモデルを活用できるようになることを期待しています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_other_diagrams"><a class="anchor" href="#_other_diagrams"></a>6 他の図、他の機能など</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>他の図、 astah* の他の機能のことを書く。</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix-01"><a class="anchor" href="#_appendix-01"></a>付録 A: 関連資料、ワークシート等</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>サンプルモデルとプログラム</p>
<div class="ulist">
<ul>
<li>
<p><code>sample01.zip</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary"><a class="anchor" href="#_glossary"></a>用語集</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">変換ルール</dt>
<dd>
<p>前工程のモデルから後工程モデル、設計のモデルからコードなど、異なる工程の間には、表記や意味に違いが生じる。このとき、それぞれの工程の成果物の要素（モデルの要素）同士を対応づけると、成果物のつながりが確保できる。そのような対応づけを「変換ルール」と呼ぶ。</p>
</dd>
<dt class="hdlist1">マジックナンバー（magic number）</dt>
<dd>
<p>直接数値のまま使っていて、値の意味がわからない識別子番号や数値定数のこと。 <code>const</code> 修飾子やマクロ定義を使って名前をつけることで、わかりやすくする対処方法がよく用いられる。</p>
</dd>
<dt class="hdlist1">ドメイン（domain, 問題領域）</dt>
<dd>
<p>あるシステムにおいて取り扱う必要があることがらが複数の領域に渡る場合、領域ごとに使われることばや隣接する領域によってそのシステムを区分けしたほうがよい。その分けた領域のことを「ドメイン（問題領域）と呼ぶ。領域に分けることを「ドメイン分割（domain separation）」と呼ぶ。一般に、システムやサブシステムは複数のドメインによって構成される。
たとえば、自動搬送ロボットを使った運搬システムの場合、運搬業務としては荷物を運ぶ手順、自動搬送ロボットには運搬に使う装置としての走行動作や外部との操作や通信、自動搬送ロボットを構成するデバイスではモーターを動かすというように、それぞれが使うことばが異なっており、これらは異なるドメインとみなせる。</p>
</dd>
<dt class="hdlist1">ドメイン分割（domain separation）</dt>
<dd>
<p>「ドメイン」を参照。</p>
</dd>
<dt class="hdlist1">サブシステム（subsystem）</dt>
<dd>
<p>あるシステムにおいて、開発単位が異なる（別のプログラムに分かれる、別途開発のライブラリなど）や、操作者や通信が介在することで動作が区切られるような場合、分けたそれぞれをそのシステムの「サブシステム」と呼ぶ。サブシステムに分けることを「サブシステム分割（subsystem separation）」と呼ぶ。一般に、サブシステムは復数のドメインによって構成される。
たとえば、PCによる管制局と自動搬送ロボットで構成される自動搬送システムを考えると、管制局、自動搬送ロボットともに運搬業務のことばを扱う運搬業務のドメインを持つが、開発単位が異なり通信も介在するのでそれぞれサブシステムとみなせる。</p>
</dd>
<dt class="hdlist1">サブシステム分割（subsystem separation）</dt>
<dd>
<p>「サブシステム」を参照。</p>
</dd>
<dt class="hdlist1">ロバストネス図（robustness diagram）</dt>
<dd>
<p>ロバストネス分析に用いる記法。クラスについて「バウンダリ」「エンティティ」「コントロール」の3種類のステレオタイプと専用のアイコンを与え、ここにアクターを加えたクラス図を描くことで構成要素を探しやすくする。</p>
</dd>
<dt class="hdlist1">ロバストネス分析（robustness analisys）</dt>
<dd>
<p>システムの構成要素は「バウンダリ」「エンティティ」「コントロール」の3種類に大別できると考え、これらを探すことでシステムの構成要素を抽出しようとする分析方法。記法として「ロバストネス図」を用いる。図の要素の接続関係には、アクターはバウンダリとしか接続が持てない、エンティティはコントロールを介してしか他とつながることができないなどの制約があり、この制約によって構成要素を探しやすくなっている。</p>
</dd>
<dt class="hdlist1">オブジェクト図（object diagram）</dt>
<dd>
<p>システムの構成要素を、実際に登場する具体的な要素（オブジェクト）を使って表した図。インスタンス図とも呼ばれる。</p>
</dd>
<dt class="hdlist1">インスタンス図（instance diagram）</dt>
<dd>
<p>「オブジェクト図」を参照。</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bibliography"><a class="anchor" href="#_bibliography"></a>参考文献</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="UMLSPEC"></a>[UMLSPEC] OMG 統一モデリング言語（UNIFIED MODELING LANGUAGE）.</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.omg.org/spec/UML/" class="bare">https://www.omg.org/spec/UML/</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a id="SYSML"></a>[SYSML] OMG System Modeling Language (SysML).</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.omg.org/spec/SysML/" class="bare">http://www.omg.org/spec/SysML/</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a id="mathgirl"></a>[mathgirl] 数学ガール.</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.hyuki.com/girl" class="bare">https://www.hyuki.com/girl</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a id="robustness01"></a>[robustness01] ワークブック形式で学ぶUMLオブジェクトモデリング.</p>
<div class="ulist">
<ul>
<li>
<p>ローゼンバーグ, スコット. ソフトバンク. 2002.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a id="robustness02"></a>[robustness02] ユースケース駆動開発実践ガイド.</p>
<div class="ulist">
<ul>
<li>
<p>ローゼンバーグ, ステファン. 翔泳社. 2007.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a id="rulebook"></a>[rulebook] ボーリング競技規則.</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://jbc-iwate.com/service/message/201012101.pdf" class="bare">https://jbc-iwate.com/service/message/201012101.pdf</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_colophon"><a class="anchor" href="#_colophon"></a>奥付</h2>
<div class="sectionbody">
<div class="paragraph">
<p>「モデルを使ってソフトウェアを開発しよう」</p>
</div>
<div class="paragraph">
<p>発行日 : 2022-02-17<br>
バージョン : html_0350<br>
作成者 : 株式会社チェンジビジョン<br>
本書の内容に関する質問等がありましたら、作成者までお知らせください。</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
バージョン html_0350<br>
最終更新 2022-02-12 12:15:52 +0900
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>