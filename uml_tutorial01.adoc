ifndef::revnumber[]
include::front_matter.adoc[]
endif::[]

[[_preparation]]
== 準備

[.lead]
このチュートリアルでは、モデリングツールとして {astah} を、実装にはRubyを使います。
最初に、演習に必要な環境を用意しましょう。

=== モデリングツール（ {astah} ）を用意する

このチュートリアルで使用するモデリングツールを用意しましょう。

{astah} の入手や評価版を含むライセンスの取得方法などについては、
次のページを参照してください。

[NOTE]
.{astah} の入手や取得方法に関するページを用意する。
--
{astah}  の取得方法:: `URL`
{astah}  のライセンスの入手方法::  `URL`
{astah}  のインストール:: `URL`
{astah}  のライセンスの追加方法:: `URL`
--

=== 実装環境を用意する

このチュートリアルでは、実装に Ruby を使います。執筆時点では {ruby-version} を使いました。

Ruby は、Windows、Mac、Linuxで動作するオープンソースの言語プログラミング言語です。
インストール方法は利用環境によって異なりますので、詳しくは、Rubyの公式サイトの説明やWebの記事を参考にしてください。

Rubyのインストール:: `https://www.ruby-lang.org/ja/documentation/installation/`

=== 演習用のプロジェクトを用意する

業務やシステムを分析（あるいは設計）するときは、たいてい複数種類のモデル図を使って表します。
{astah} では、複数のモデル図をまとめてたモデルファイルを「プロジェクト」と呼んでいます。

[NOTE]
--
{astah} のプロジェクトの作り方についての詳しい説明は、次のページを参考にしてください。


{astah}  機能ガイド プロジェクトの作成と利用:: `https://astah.change-vision.com/ja/manual/278-project-file.html`
--

この演習で使うプロジェクトを用意しましょう。
新規プロジェクトを作成したら、先に名前をつけて保存しておくとよいでしょう。


.演習で使うプロジェクトを作成する
--
. {astah} を起動する。
. 「ファイル」メニューから「プロジェクトの新規作成」を選択する（ <<create_project01>> ）。


[[create_project01]]
.新しいプロジェクトを作成する
image::create_project01.png[{half-width}]

[start=3]
. 「no_title」という名前で新しいプロジェクトが作成される（ <<create_project02>> ）。

[[create_project02]]
.新しいプロジェクトが作成された
image::create_project02.png[{half-width}]

[start=4]
. 「ファイル」メニューから「プロジェクトを保存」を選択する（ <<create_project03>> ）。

[[create_project03]]
.新しいプロジェクトを保存する
image::create_project03.png[{half-width}]

[start=5]
. 「保存」ダイアログが開くので、プロジェクトの保存場所と保存するファイル名を指定して、「保存」ボタンをクリックする。ここでは保存場所として「デスクトップ」に「BowlingScore」フォルダを作成し、「bowling_score」を指定した（ <<create_project04>> ）。

[[create_project04]]
.ダイアログを操作してプロジェクトを保存する場所とプロジェクトファイル名を指定する
image::create_project04.png[{three-quarters-width}]

[start=6]
. 保存すると、プロジェクトファイルにつけた名前が「構造ツリー」に反映される（ <<create_project05>> ）。

[[create_project05]]
.ダイアログを操作してプロジェクトを保存する場所とプロジェクトファイル名を指定する
image::create_project05.png[{three-quarters-width}]
--


=== ボウリングのスコアのつけ方

ボウリング場では、だいぶ前から自動でスコアが表示されるようになっています。
自動化される前は、受付でスコアシートをもらって、自分たちでスコアを計算し、手でスコアをつけていました（ <<hand_scoring>> ）。

[[hand_scoring]]
.手でスコアを記入している様子
image::hand_scoring.jpg[{half-width}]

// 元の画像は、https://dailyportalz.jp/b/2012/10/30/b/img/pc/001.jpg

ボウリングの規則とスコアのつけ方について、公益財団法人「全日本ボウリング協会」の「ボウリング競技規則」を参考に、まとめてみました。

公益財団法人「全日本ボウリング協会」のボウリング競技規則:: `https://jbc-iwate.com/service/message/201012101.pdf`


==== クラッシックスコアリング

従来から使われていて、広く普及しているスコア計算方式です。

.ゲームの構成
* ボウリングの1ゲームは、10 個のフレームをもって構成する。
* 競技者は、ストライクの場合を除き、それぞれのフレームで 2 回ずつ投球する。ただし、第 10 フレームがストライク又はスペアの場合には、サービスフレームとして、ストライクの場合は、さらに 2 回投球でき、スペアの場合には 1 回投球できる。
* ゲームの成績は、適正な投球によって、倒されたピンの数をもって計算し、10 個のフレームの合計点によって、これを表す。
* 適正に投球されたボールとは、競技者の持っているボールが、手から放れファールラインを越えたものをいう。



[[scoring_rule01]]
.ボウリングスコアに使う記号と意味
[options="header", cols="^10,13,90"]

|===
^| 記号 | 名称 | 意味
a| image::strike.png[{thumbnail}] | ストライク | 1投目で10本全てを倒した場合。ストライクをだしたフレームの得点は、次の2投分を加算する。2回続いたら3フレーム目の1投目までを加算する。スコア欄は、それまでは空欄にしておく。ストライクが続くことを「ダブル」「トリプル（ターキー）」と呼ぶ。
a| image::spare.png[{thumbnail}] | スペア | 1投目で残ったピンを、2投目で全部倒した場合。次の1投分を加算する。スコア欄は、それまでは空欄にしておく。
a| image::miss.png[{thumbnail}] | ミス | フレームの2投目でピンを1本も倒せなかった場合。2投目でガターに落ちても「G」の記号は使わずにこの記号を使う。そのフレームの得点は、1投目で倒したピン数になる。なお、1つのフレームで 2 回投球し、10本のピンを全部倒すことができなかった場合をエラーという。
a| image::gutter.png[{thumbnail}] | ガター | 1投目でレーンの両脇にある溝（ガター）にボールが落ちた場合。2投目はガターに落ちた場合も「ミス」として扱う。
a| image::split.png[{thumbnail}] a| スプリット | 1投目で1番ピン（ヘッドピンともいう）と他のいくつかのピンが倒れ、2 本以上のピンが次のような状態に残った場合。スプリットの場合は、1投目のピン数を○で囲む。

* 残っているピンの中間のピンが少なくとも1本倒れたとき。例えば7と9あるいは3と10。
* 残っているピンのすぐ前のピンが少なくとも1本倒れたとき。例えば5と6。

a| image::foul.png[{thumbnail}] | ファール | ファールラインを越えて投球されたという記号。1投目でファールした場合、ピンを倒しても1投目のピン数は0になる。2投目は全ピンを立て直す。2投目でファールした場合、ピンを倒しても2投目のピン数は0になる。第10フレームの3投目がファールの場合も、ピンを倒しても3投目のピン数は0になる。

|===


.スコアの例
image::classic_score_sample.jpg[{full-width}]

==== カレントフレームスコアリング

2018年アジア競技大会で採用された新しいスコア計算方式です。

.クラッシックスコアリングと異なる点
*  1投目によって10ピンすべてを倒した場合はストライクとなる。ストライクのとき、そのフレームの得点は30となる。
*  続けて2回ストライクの場合は、それぞれのストライクの得点は30となる。
*  1投目の後、残ったピンを2投目によって全部倒した場合は、スペアとなる。スペアのとき、そのフレームの得点は、1投目のピン数に10を加えた数となる。
* 第10フレームでストライクあるいはスペアをとった場合も、3投目はない。

.スコアの例（カレントフレームスコアリングの場合）
image::current_frame_score_sample.jpg[{full-width}]


// 参加者のアベレージがわからないと、力量に応じたハンディキャップを設定するのは難しいよう。
// なので、このチュートリアルでは、ハンディキャップについては言及しないでおく。
// NOTE: ハンディキャップの扱い方を調べておく。



.【豆知識】ボウリングの名前の由来
****
[verse, Wikipedia]
--
「ボウリングをすること」などを意味する「bowl」という英語は、ラテン語で「泡」や「瘤」を意味する「bulla」に由来する。一方、同じ綴りで食器や容器（ボウル）を意味する「bowl」や「球」を意味する「ball」は、ゲルマン語に由来し、本質的に異なる。
--
****
