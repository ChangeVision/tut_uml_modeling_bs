ifndef::revnumber[]
include::front_matter.adoc[]
endif::[]

[[_preparation]]
== 準備

[.lead]
このチュートリアルでは、モデリングツールとして {astah} Professional を、実装にはRubyを使います。
最初に、演習に必要な環境を用意しましょう。

=== モデリングツールを用意する

このチュートリアルで使用するモデリングツール {astah} Professional を用意しましょう。

購入前に試用したい場合は、次のページを参照してください。

astah*製品の評価手順:: `https://astah.change-vision.com/ja/shopping/evaluate.html`

購入する場合は、次のページを参照して、自分に合ったライセンスを選択してください。

最適なライセンスを見つける:: `https://astah.change-vision.com/ja/shopping/price.html`

いずれかの方法で、 {astah} Professional を入手できたら、次のページを参照して、自分に合ったライセンスを登録してください。

ライセンス登録方法:: `https://astah.change-vision.com/ja/registry.html`


=== 実装環境を用意する

このチュートリアルでは、実装に Ruby を使います。執筆時点では {ruby-version} を使いました。

Ruby は、Windows、Mac、Linuxで動作するオープンソースの言語プログラミング言語です。
インストール方法は利用環境によって異なります。
詳しくは、Rubyの公式サイトの説明や、関連するウェブサイトの記事を参考にしてください。

Rubyのインストール:: `https://www.ruby-lang.org/ja/documentation/installation/`


このチュートリアルでは、Rubyの高度な機能、規模の大きなライブラリやフレームワークは使いません。
ですが、Rubyについて多少の知識は必要になるでしょう。
Rubyになじみがない人は、公式サイトにある次のようなページを参考にするとよいでしょう。


他言語からのRuby入門:: `https://www.ruby-lang.org/ja/documentation/ruby-from-other-languages/`


20分ではじめるRuby:: `https://www.ruby-lang.org/ja/documentation/quickstart/`


=== 演習用のプロジェクトを用意する

業務やシステムを分析（あるいは設計）するときは、たいてい複数種類のモデル図を使って表します。
{astah} では、複数のモデル図をまとめたモデルファイルを「プロジェクト」と呼んでいます。
「<<create_proj01>> 」の手順に従って、演習用のプロジェクトを用意しましょう。


[[create_proj01]]
.演習で使うプロジェクトを作成する
. {astah} を起動する。
. 「ファイル」メニューから「プロジェクトの新規作成」を選択する（ <<create_project01>> ）。


[[create_project01]]
.新しいプロジェクトを作成する
image::GSW-20220206-131611.png[{three-quarters-width}]

[start=3]
. 「no_title」という名前で新しいプロジェクトが作成される（ <<create_project02>> ）。

[[create_project02]]
.新しいプロジェクトが作成された
image::GSW-20220206-131639.png[{three-quarters-width}]

[start=4]
. 「ファイル」メニューから「プロジェクトを保存」を選択する（ <<create_project03>> ）。
** 「保存」ダイアログが開く。

[[create_project03]]
.新しいプロジェクトを保存する
image::GSW-20220206-131657.png[{three-quarters-width}]


[start=5]
. プロジェクトの保存場所と保存するファイル名を指定する。
** ここでは、保存場所として「デスクトップ」に「BowlingScore」フォルダーを作成した。
** ファイル名に「bowling_score」を指定して保存した（ <<create_project04>> ）。

[[create_project04]]
.ダイアログを操作してプロジェクトを保存する場所とプロジェクトファイル名を指定する
image::GSW-20220206-131840.png[{three-quarters-width}]

TIP: 新規プロジェクトを作成したら、このように、モデルを作成する前に名前をつけて保存しておくとよいでしょう。

[start=6]
. 保存すると、プロジェクトファイルにつけた名前が「構造ツリー」に反映される（ <<create_project05>> ）。

[[create_project05]]
.プロジェクトファイル名が、プロジェクト名に反映された
image::GSW-20220206-131907.png[{three-quarters-width}]

[NOTE]
--
{astah} のプロジェクトの作り方についての詳しい説明は、機能ガイドの「プロジェクトの作成と利用」を参考にしてください。

{astah}  機能ガイド プロジェクトの作成と利用:: `https://astah.change-vision.com/ja/manual/278-project-file.html`
--


=== ボウリングのスコアのつけ方

ボウリング場では、だいぶ前（1980年代の終りくらい）から、スコアを自動計算してディスプレイに表示するシステムが使われるようになっています。
自動化される前は、受付でスコアシートをもらって、自分たちでスコアを計算し、手書きでスコアをつけていました（ <<hand_scoring>> ）。

[[hand_scoring]]
.手でスコアを記入している様子
image::hand_scoring.jpg[{half-width}]

// 元の画像は、https://dailyportalz.jp/b/2012/10/30/b/img/pc/001.jpg

ボウリングの規則とスコアのつけ方について、公益財団法人「全日本ボウリング協会」の「ボウリング競技規則」を参考に、まとめてみました。

公益財団法人「全日本ボウリング協会」のボウリング競技規則:: `https://jbc-iwate.com/service/message/201012101.pdf`

==== ボウリングスコアに使う記号

ボウリングスコアに使う記号と意味を <<scoring_symbols>> に示します。

[[scoring_symbols]]
.ボウリングスコアに使う記号と意味
[options="header", cols="^10,13,90"]

|===
^| 記号 | 名称 | 意味
a| image::strike.png[{thumbnail}] | ストライク | 1投目で10本全てを倒した場合。ストライクをだしたフレームの得点は、次の2投分を加算する。2回続いたら3フレーム目の1投目までを加算する。スコア欄は、それまでは空欄にしておく。ストライクが続くことを「ダブル」「トリプル（ターキー）」と呼ぶ。
a| image::spare.png[{thumbnail}] | スペア | 1投目で残ったピンを、2投目で全部倒した場合。次の1投分を加算する。スコア欄は、それまでは空欄にしておく。
a| image::miss.png[{thumbnail}] | ミス | フレームの2投目でピンを1本も倒せなかった場合。2投目でガターに落ちても「G」の記号は使わずにこの記号を使う。そのフレームの得点は、1投目で倒したピン数になる。なお、1つのフレームで 2 回投球し、10本のピンを全部倒すことができなかった場合をエラーという。
a| image::gutter.png[{thumbnail}] | ガター | 1投目でレーンの両脇にある溝（ガター）にボールが落ちた場合。2投目はガターに落ちた場合も「ミス」として扱う。
a| image::split.png[{thumbnail}] | スプリット | 1投目で1番ピン（ヘッドピンともいう）と他のいくつかのピンが倒れ、2 本以上のピンが次のような状態に残った場合。スプリットの場合は、1投目のピン数を○で囲む。
（残っているピンの中間のピンが少なくとも1本倒れたとき。例えば7と9あるいは3と10。残っているピンのすぐ前のピンが少なくとも1本倒れたとき。例えば5と6。）
a| image::foul.png[{thumbnail}] | ファウル | ファウルラインを越えて投球されたという記号。1投目でファウルした場合、ピンを倒しても1投目のピン数は0になる。2投目は全ピンを立て直す。2投目でファウルした場合、ピンを倒しても2投目のピン数は0になる。第10フレームの3投目がファウルの場合、ピンを倒しても3投目のピン数は0になる。

|===


[[classic_scoring]]
==== クラッシックスコアリング

古くから使われていて、広く普及しているスコア計算方式です。

.スコア計算の規定
[example]
--
* ボウリングの1ゲームは、10 個のフレームをもって構成する。
* 競技者は、ストライクの場合を除き、それぞれのフレームで 2 回ずつ投球する。
** ただし、第10フレームがストライクまたはスペアの場合、サービスフレームが追加される。
** ストライクの場合は、サービスフレームで2回投球できる。
** スペアの場合は、サービスフレームで1回投球できる。
* ゲームの成績は、10個のフレームの合計点によってこれを表す。
** 適正な投球によって倒されたピンの数をもって計算する。
** 適正に投球されたボールとは、競技者の持っているボールが、手から放れファウルラインを越えたものをいう。
-- 

.スコアの例（クラッシクスコアリングの場合）
image::classic_score_sample.jpg[{full-width}]

==== カレントフレームスコアリング

2018年アジア競技大会で採用された新しいスコア計算方式です。

.クラッシックスコアリングと異なる点
[example]
--
*  1投目によって10ピンすべてを倒した場合はストライクとなる。ストライクのとき、そのフレームの得点は30となる。
*  続けて2回ストライクの場合は、それぞれのストライクの得点は30となる。
*  1投目の後、残ったピンを2投目によって全部倒した場合は、スペアとなる。スペアのとき、そのフレームの得点は、1投目のピン数に10を加えた数となる。
* 第10フレームでストライクあるいはスペアをとった場合も、3投目はない。
--

.スコアの例（カレントフレームスコアリングの場合）
image::current_frame_score_sample.jpg[{full-width}]


.【豆知識】ボウリングの名前の由来
****
[verse, Wikipedia]
--
「ボウリングをすること」などを意味する「bowl」という英語は、ラテン語で「泡」や「瘤」を意味する「bulla」に由来する。一方、同じ綴りで食器や容器（ボウル）を意味する「bowl」や「球」を意味する「ball」は、ゲルマン語に由来し、本質的に異なる。
--
****


[NOTE]
--
ボーリングのハンディキャップは、参加者が普段プレーしているときのアベレージ（平均スコア）を基に、力量に応じて設定するそうです。
このチュートリアルでは、ハンディキャップは取り扱わないでおきます。
--
