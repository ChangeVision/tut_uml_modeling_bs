<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="description" content="この文書は、モデリングツールにastah*を使って、ソフトウェアの開発にUMLを使う方法について学ぶチュートリアルです。">
<meta name="author" content="株式会社チェンジビジョン">
<title>モデルを使ってソフトウェアを開発しよう: UML初学者向けチュートリアル</title>
<link rel="stylesheet" href="css/mystyle.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="_structure_design" class="book toc2 toc-left">
<div id="header">
<h1>モデルを使ってソフトウェアを開発しよう: UML初学者向けチュートリアル</h1>
<div class="details">
<span id="author" class="author">株式会社チェンジビジョン</span><br>
<span id="revnumber">バージョン html_0643,</span>
<span id="revdate">2023-02-08</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">目次</div>
<p><span class="toc-root"><a href="tut_uml_modeling_bs.html">モデルを使ってソフトウェアを開発しよう: UML初学者向けチュートリアル</a></span></p><ul class="sectlevel1">
<li><a href="_preface.html">はじめに</a>
</li>
<li><a href="_copyright.html">注意事項</a>
</li>
<li><a href="_preparation.html">1 準備</a>
</li>
<li><a href="_structure_design.html"><span class="toc-current">2 スコアシートの構造を調べる</span></a>
<ul class="sectlevel2">
<li><a href="_structure_design.html#_スコアシートの構造をオブジェクト図で表す">2.1 スコアシートの構造をオブジェクト図で表す</a>
</li>
<li><a href="_structure_design.html#_スコアシートの構造をクラス図で表す">2.2 スコアシートの構造をクラス図で表す</a>
</li>
<li><a href="_structure_design.html#_まとめ">2.3 まとめ</a>
</li>
</ul>
</li>
<li><a href="_model_to_code_design.html">3 モデルとコードの対応づけ</a>
</li>
<li><a href="_behavior_design.html">4 スコアやフレームの状態を調べる</a>
</li>
<li><a href="_program_test.html">5 できあがったプログラムを試す</a>
</li>
<li><a href="_summary.html">6 まとめ</a>
</li>
<li><a href="_other_diagrams.html">7 他の図、他の機能など</a>
</li>
<li><a href="_appendix-01.html">付録 A: モデルやプログラムの作成例</a>
</li>
<li><a href="_bibliography.html">参考文献</a>
</li>
<li><a href="_colophon.html">奥付</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_structure_design"><a class="anchor" href="#_structure_design"></a>2 スコアシートの構造を調べる</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>ボウリングのゲームスコアを記録するスコアシートは、どのような要素で構成されているでしょうか。
また、それらの構成要素の間にはどのような関係があるのでしょうか。
構成要素や構成要素の関係を表すには「構造のモデル」を使います。
構造のモデルを使って、スコアシートの構成要素や、構成要素間の関係を検討してみましょう。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>このチュートリアルでは、クラッシックスコアリング（ <a href="_preparation.html#classic_scoring">1.4.2</a> ）の場合について考えることにします。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_スコアシートの構造をオブジェクト図で表す"><a class="anchor" href="#_スコアシートの構造をオブジェクト図で表す"></a>2.1 スコアシートの構造をオブジェクト図で表す</h3>
<div class="paragraph">
<p>スコアシートの例を参照しながら、スコアシートの構造を検討しましょう。</p>
</div>
<div class="sect3">
<h4 id="_スコアシートの例"><a class="anchor" href="#_スコアシートの例"></a>2.1.1 スコアシートの例</h4>
<div class="paragraph">
<p>ゲーム中のスコアシートの例を <a href="_structure_design.html#scoresheet01">図 2.1</a> に示します。
この例では、2人でプレーしています。
いまは、2ゲーム目のプレー中で、1人目の6フレーム目の第1投目までゲームが進んでいます。
また、彼らは1フレームずつ交代で投球していることがわかります。
もし、彼らがもう1ゲーム分プレーする場合には、このスコアの下にもう一度2人分のスコアが追加されるでしょう。</p>
</div>
<div id="scoresheet01" class="imageblock">
<div class="content">
<img src="images/scoresheet02.png" alt="scoresheet02" width="100%">
</div>
<div class="title">図 2.1 スコアシートの例</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
<div class="paragraph">
<p>ボウリングでは、「ゲーム」ということばは、各自が10フレーム分プレーした結果を指す場合と、複数名で10フレーム分プレーしたひと組の結果を指す場合があるようです。
これらを呼び分ける方法がわからなかったので、このチュートリアルでは、前者を「スコア」、後者を「ゲーム」と呼ぶことにします。</p>
</div>
<div class="paragraph">
<p>実際のボウリング競技において、これらの呼び分方をご存じの方は、その呼び分け方を使うとよいでしょう。</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>スコアシートを観察してわかることをまとめました。</p>
</div>
<div id="scoresheet02" class="sidebarblock">
<div class="content">
<div class="title">スコアシートを観察してわかること</div>
<div class="ulist">
<ul>
<li>
<p>スコアシートには、プレー開始日時が記載されている。</p>
</li>
<li>
<p>スコアシートには、プレーヤー名とその人の10フレーム分の投球を記録する欄がある。</p>
<div class="ulist">
<ul>
<li>
<p>これをスコアと呼ぶことにする。</p>
</li>
</ul>
</div>
</li>
<li>
<p>1つのゲームの進行中は、1フレームごとにプレーヤーが交代して投球する。</p>
<div class="ulist">
<ul>
<li>
<p>この方式は、ベーカー方式と呼ばれている。</p>
</li>
</ul>
</div>
</li>
<li>
<p>スコアシートには、複数人のスコアが記録されている。</p>
<div class="ulist">
<ul>
<li>
<p>同時に進行している複数名のスコアのまとまりをゲームと呼ぶことにする。</p>
</li>
</ul>
</div>
</li>
<li>
<p>プレーヤーの組を単位として複数回ゲームをプレーできる。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>これらを元に、スコアシートの構成要素や構成要素の間の関係をモデル図で表してみましょう。</p>
</div>
</div>
<div class="sect3">
<h4 id="_プロジェクトに設計モデルを追加する"><a class="anchor" href="#_プロジェクトに設計モデルを追加する"></a>2.1.2 プロジェクトに設計モデルを追加する</h4>
<div class="paragraph">
<p>まず、 astah* で作成したプロジェクトに設計モデルを追加しましょう。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
<div class="paragraph">
<p>設計モデルということばが表すものは、手法や分野によって少しずつ異なっています。このチュートリアルでは、次の2つの側面について表したものを設計モデルと呼ぶことにします。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>対象とする業務やサービスに必要となる構成要素やその関係を「構造のモデル」（静的モデル）として表したもの。</p>
</li>
<li>
<p>業務やサービスを実現するために必要となる動作を「振る舞いのモデル」（動的モデル）として表したもの。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>設計に関わる構成要素は、対象とする業務やサービスを分析して得られることもあれば、開発に採用する資源や方式から得られることもあります。</p>
</div>
</td>
</tr>
</table>
</div>
<div id="add_design_model" class="olist arabic">
<div class="title">プロジェクトに設計モデルを追加する</div>
<ol class="arabic">
<li>
<p>プロジェクトにモデルを追加する。</p>
<div class="ulist">
<ul>
<li>
<p>構造ツリー上で、プロジェクトを選択する。</p>
</li>
<li>
<p>右クリックしてポップアップメニューを開き、「モデルの追加＞モデル」を選択する（ <a href="_structure_design.html#add_design_model01">図 2.2</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_design_model01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-132000.png" alt="GSW 20220206 132000" width="75%">
</div>
<div class="title">図 2.2 プロジェクトにモデルを追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>追加したモデルに名前をつける。</p>
<div class="ulist">
<ul>
<li>
<p>構造ツリー上で、追加したモデルを選択した状態で、プロパティーの「ベース」タブを選択する。</p>
</li>
<li>
<p>「名前」を編集して「設計モデル」とする（ <a href="_structure_design.html#add_design_model02">図 2.3</a> ）。</p>
</li>
<li>
<p>入力が確定すると、構造ツリーの表示にも反映される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_design_model02" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-132154.png" alt="GSW 20220206 132154" width="75%">
</div>
<div class="title">図 2.3 モデルに設計用のモデルとして名前をつけた</div>
</div>
</div>
<div class="sect3">
<h4 id="_設計モデルにオブジェクト図を追加する"><a class="anchor" href="#_設計モデルにオブジェクト図を追加する"></a>2.1.3 設計モデルにオブジェクト図を追加する</h4>
<div class="paragraph">
<p>「オブジェクト図（インスタンス図と呼ぶこともあります）」を使ってスコアシートに登場するオブジェクトを表してみましょう。
astah* では、オブジェクト図を作成するときは「クラス図」を使いますので、クラス図を追加しましょう。</p>
</div>
<div class="olist arabic">
<div class="title">設計モデルにオブジェクト図を追加する</div>
<ol class="arabic">
<li>
<p>モデルにクラス図を追加する</p>
<div class="ulist">
<ul>
<li>
<p>構造ツリーから設計モデルを選択し、右クリックしてポップアップメニューを開く（ <a href="_structure_design.html#object00">図 2.4</a> ）。</p>
</li>
<li>
<p>「図の追加＞クラス図」でクラス図が追加される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="object00" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-132218.png" alt="GSW 20220206 132218" width="75%">
</div>
<div class="title">図 2.4 モデルにクラス図を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>オブジェクト図に名前をつける</p>
<div class="ulist">
<ul>
<li>
<p>追加したクラス図のプロパティーの「ベース」タブを開く。</p>
</li>
<li>
<p>名前を編集して「ゲームスコアのオブジェクト図」とする（  <a href="_structure_design.html#object01">図 2.5</a> ）。</p>
</li>
<li>
<p>ダイアグラムエディタのタイトルやタブにも反映される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="object01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133044.png" alt="GSW 20220206 133044" width="75%">
</div>
<div class="title">図 2.5 図の名前を「ゲームスコアのオブジェクト図」にする</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクト図にスコアシートを追加する"><a class="anchor" href="#_オブジェクト図にスコアシートを追加する"></a>2.1.4 オブジェクト図にスコアシートを追加する</h4>
<div class="paragraph">
<p><a href="_structure_design.html#scoresheet01">図 2.1</a> や「<a href="_structure_design.html#scoresheet02">スコアシートを観察してわかること</a> 」を参照しながら、スコアシートに記載されている要素をオブジェクト図に追加してみましょう。</p>
</div>
<div class="paragraph">
<p>まず、「スコアシート」オブジェクトを追加します。</p>
</div>
<div id="add_scoresheet01" class="olist arabic">
<div class="title">スコアシートを表すオブジェクトを追加する</div>
<ol class="arabic">
<li>
<p>パレットから「インスタンス仕様」を選択して、図に配置する（ <a href="_structure_design.html#add_instance01">図 2.6</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>「インスタンス仕様0」という名前のオブジェクトが配置される（末尾の数字は作るたびに変わる）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_instance01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133142.png" alt="GSW 20220206 133142" width="75%">
</div>
<div class="title">図 2.6 インスタンス仕様を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>追加したオブジェクトの名前を個別のスコアシートの名前に変える。</p>
<div class="ulist">
<ul>
<li>
<p>オブジェクトを選択した状態でプロパティーから編集する（ <a href="_structure_design.html#obj_scoresheet01">図 2.7</a> ）。</p>
</li>
<li>
<p><a href="_structure_design.html#scoresheet01">図 2.1</a> のスコアシートを示す固有の名前をつける。ここでは「scoresheet01」とした。</p>
</li>
<li>
<p>名前の入力が確定すると、オブジェクトの名前にも反映される。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="obj_scoresheet01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133218.png" alt="GSW 20220206 133218" width="75%">
</div>
<div class="title">図 2.7 名前を「scoresheet01」に変更する</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="ヒント"></i>
</td>
<td class="content">
個々のオブジェクトを識別するためにつける名前のことを、オブジェクト名（またはインスタンス名）と呼びます。
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_スコアシートオブジェクトにクラスを割り当てる"><a class="anchor" href="#_スコアシートオブジェクトにクラスを割り当てる"></a>2.1.5 スコアシートオブジェクトにクラスを割り当てる</h4>
<div class="paragraph">
<p>追加したオブジェクトは、どのようなクラスのオブジェクトなのか定まっていません。
それが分かるようクラスを定義して割り当てておきましょう。</p>
</div>
<div id="add_class_and_apply" class="olist arabic">
<div class="title">クラスを追加してオブジェクトに割り当てる</div>
<ol class="arabic">
<li>
<p>オブジェクト「scoresheet01」を選択した状態で、プロパティーから「新規作成」ボタンをクリックする（ <a href="_structure_design.html#class_def_dialog00">図 2.8</a> ）。</p>
</li>
</ol>
</div>
<div id="class_def_dialog00" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133232.png" alt="GSW 20220206 133232" width="75%">
</div>
<div class="title">図 2.8 オブジェクトを選択してクラスを「新規作成」する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>クラス「ScoreSheet」を定義する。</p>
<div class="ulist">
<ul>
<li>
<p>クラスを定義するダイアログが表示される（ <a href="_structure_design.html#class_def_dialog01">図 2.9</a> ）。</p>
</li>
<li>
<p>「ベース」タブを選択し、名前に「ScoreSheet」を入力する。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class_def_dialog01" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133247.png" alt="GSW 20220206 133247" width="50%">
</div>
<div class="title">図 2.9 クラス「ScoreSheet」を定義する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>スコアシートにはプレー開始日時があるので、これを属性に追加する。</p>
<div class="ulist">
<ul>
<li>
<p>「属性」タブを選択する。</p>
</li>
<li>
<p>「＋」ボタンを押すと属性が追加されるので、名前に「play_date」を入力する（ <a href="_structure_design.html#add_attr_play_time">図 2.10</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_attr_play_time" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133548.png" alt="GSW 20220206 133548" width="50%">
</div>
<div class="title">図 2.10 属性「play_date」を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>属性「play_date」の型を定義する。</p>
<div class="ulist">
<ul>
<li>
<p>「型」欄を編集状態にして「Time」を入力すると、「型になるTimeを新規作成しますか？」というメッセージのダイアログが表示される（ <a href="_structure_design.html#dialog_add_class_time">図 2.11</a> ）。</p>
</li>
<li>
<p>「はい」をクリックしてダイアログを閉じる。</p>
</li>
<li>
<p>クラス「Time」が作成され、構造ツリーにも追加される（ <a href="_structure_design.html#class_time_added">図 2.12</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="注記"></i>
</td>
<td class="content">
「Time」クラスは、Rubyのライブラリで、日付と時刻を操作するためのクラスです。
</td>
</tr>
</table>
</div>
<div id="dialog_add_class_time" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-173841.png" alt="GSW 20220206 173841" width="50%">
</div>
<div class="title">図 2.11 クラス「Time」の追加を促すダイアログ</div>
</div>
<div id="class_time_added" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-172618.png" alt="GSW 20220206 172618" width="50%">
</div>
<div class="title">図 2.12 クラス「Time」が追加された</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>オブジェクト図や構造ツリーを確認する（ <a href="_structure_design.html#instance03">図 2.13</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>「閉じる」をクリックして、クラス定義のダイアログを閉じる。</p>
</li>
<li>
<p>オブジェクトの表示が「scoresheet01 : ScoreSheet」に変わっている。</p>
</li>
<li>
<p>属性「play_date」の属性値を保持する欄（スロットと呼ぶ）も追加されている。</p>
</li>
<li>
<p>構造ツリーにもTimeクラスが追加されている。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="instance03" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-133959.png" alt="GSW 20220206 133959" width="100%">
</div>
<div class="title">図 2.13 オブジェクトにクラスやスロットが割当てられた</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>追加したスロットに属性値を設定する（ <a href="_structure_design.html#instance04">図 2.14</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>オブジェクト「scoresheet01」を選択して、プロパティーから「ベース」タブを開く。</p>
</li>
<li>
<p>属性「play_date」の値に日時、たとえば「2022/02/04 16:18」などと入力する。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="instance04" class="imageblock">
<div class="content">
<img src="images/GSW-20220206-181040.png" alt="GSW 20220206 181040" width="100%">
</div>
<div class="title">図 2.14 オブジェクトのスロットに属性値が追加された</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクト図にゲームを追加する"><a class="anchor" href="#_オブジェクト図にゲームを追加する"></a>2.1.6 オブジェクト図にゲームを追加する</h4>
<div class="paragraph">
<p>次に、「スコアシート」を追加したのと同じ手順で「ゲーム」オブジェクトを追加します。
<a href="_structure_design.html#scoresheet01">図 2.1</a> の場合ゲームが2組あるので、ゲームのオブジェクトを「game01」、「game02」としましょう。
クラス名は「Game」としましょう。</p>
</div>
<div id="add_game00" class="olist arabic">
<div class="title">ゲームを表すオブジェクトを追加する</div>
<ol class="arabic">
<li>
<p>最初の（1組目の）ゲームを追加する。</p>
<div class="ulist">
<ul>
<li>
<p>パレットから「インスタンス仕様」を選択して図に配置する。</p>
</li>
<li>
<p>オブジェクト名を「game01」とする。</p>
</li>
<li>
<p>クラスを追加して「Game」とする（ <a href="_structure_design.html#add_game01">図 2.15</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_game01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-000330.png" alt="GSW 20220207 000330" width="100%">
</div>
<div class="title">図 2.15 ゲームを表すオブジェクト「game01」とクラス「Game」を追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>次の（2組目の）ゲームを追加する。</p>
<div class="ulist">
<ul>
<li>
<p>同様の手順で「game02」を追加する。</p>
</li>
<li>
<p>プロパティーから既存のクラスをプルダウンし、「Game」クラスを選択する（ <a href="_structure_design.html#add_game02">図 2.16</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_game02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-001520.png" alt="GSW 20220207 001520" width="100%">
</div>
<div class="title">図 2.16 ゲームを表すオブジェクトを追加し、既存のクラスを割当てた</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクト図にスコアを追加する"><a class="anchor" href="#_オブジェクト図にスコアを追加する"></a>2.1.7 オブジェクト図にスコアを追加する</h4>
<div class="paragraph">
<p>こんどは、プレーヤーひとり分のスコアを記録しているスコア部分を追加しましょう。
<a href="_structure_design.html#scoresheet01">図 2.1</a> の場合、スコアは4つあります。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでは、プレーヤー名はスコアの属性と考えることにしておきます。
（もちろん、プレーヤーを独立したクラスと考え、複数のスコアとを関連づけた方がもっとよいでしょう）</p>
</div>
<div id="add_screr00" class="olist arabic">
<div class="title">それぞれのプレーヤーのスコアを表すオブジェクトを追加する</div>
<ol class="arabic">
<li>
<p>パレットから「インスタンス仕様」を選択して図に配置して「score01」とする。</p>
</li>
<li>
<p>「Score」クラスを追加して、「score01」に割当てる（ <a href="_structure_design.html#add_score01">図 2.17</a> ）。</p>
</li>
</ol>
</div>
<div id="add_score01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-012006.png" alt="GSW 20220207 012006" width="100%">
</div>
<div class="title">図 2.17 スコアを表すオブジェクト「score01」を追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「Score」クラスに属性「player」を追加し、「String」クラスを追加して割当てる（ <a href="_structure_design.html#add_string_class">図 2.18</a> ）。</p>
</li>
</ol>
</div>
<div id="add_string_class" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-011349.png" alt="GSW 20220207 011349" width="50%">
</div>
<div class="title">図 2.18 属性「Player」を追加し、クラス「String」を追加して割当てる。</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「score01」のスロット「player」の値に「くぼあき」を設定する（ <a href="_structure_design.html#add_score02">図 2.19</a> ）。</p>
</li>
</ol>
</div>
<div id="add_score02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-014911.png" alt="GSW 20220207 014911" width="100%">
</div>
<div class="title">図 2.19 「player」のスロットの値にプレーヤー名を設定した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>ほかのスコアのオブジェクトも作成する（ <a href="_structure_design.html#add_score03">図 2.20</a> ）</p>
</li>
</ol>
</div>
<div id="add_score03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-024336.png" alt="GSW 20220207 024336" width="100%">
</div>
<div class="title">図 2.20 残りのスコアのオブジェクトを作成した</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクト図にフレームを追加する"><a class="anchor" href="#_オブジェクト図にフレームを追加する"></a>2.1.8 オブジェクト図にフレームを追加する</h4>
<div class="paragraph">
<p>次に、各スコアに記載されているフレームを追加しましょう。
ですが、フレームのオブジェクトの数が多いので、この場で作成してみるのは一部だけにします。</p>
</div>
<div id="add_frame00" class="olist arabic">
<div class="title">それぞれのスコアのフレームを表すオブジェクトを追加する</div>
<ol class="arabic">
<li>
<p>パレットから「インスタンス仕様」を選択して図に配置して「frame0101」とする。</p>
</li>
<li>
<p>「Frame」クラスを追加して、「frame0101」に割当てる（ <a href="_structure_design.html#add_frame01">図 2.21</a> ）。</p>
</li>
<li>
<p>「Frame」クラスの属性に「frame_no」、「first」、「second」、「spare_bonus」、「strike_bonus」、「total」を追加する。</p>
</li>
</ol>
</div>
<div id="add_frame01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-030417.png" alt="GSW 20220207 030417" width="100%">
</div>
<div class="title">図 2.21 フレームを表すオブジェクト「frame0101」を追加した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>オブジェクト「frame0101」の各スロットに値を設定する（ <a href="_structure_design.html#add_frame02">図 2.22</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>1組目のゲームの「くぼあき」さんの第1フレームは、1投目7ピン、2投目ミス（0ピン）。</p>
</li>
<li>
<p>第1フレームのトータルは7ピン。ボーナスはなし。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_frame02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-031606.png" alt="GSW 20220207 031606" width="100%">
</div>
<div class="title">図 2.22 オブジェクト「frame0101」の各スロットの値を設定した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>同様にして、ほかのフレームのオブジェクトも作成する（ <a href="_structure_design.html#add_frame03">図 2.23</a> ）。</p>
</li>
</ol>
</div>
<div id="add_frame03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-042412.png" alt="GSW 20220207 042412" width="100%">
</div>
<div class="title">図 2.23 残りのフレームのオブジェクトを作成した（一部だけ）</div>
</div>
</div>
<div class="sect3">
<h4 id="_オブジェクトのつながりを整理する"><a class="anchor" href="#_オブジェクトのつながりを整理する"></a>2.1.9 オブジェクトのつながりを整理する</h4>
<div class="paragraph">
<p>オブジェクト図に、スコアシート、ゲーム、スコアのオブジェクトが追加できました。
<a href="_structure_design.html#scoresheet01">図 2.1</a> を見ながら、これらの間にはどのようなつながりがあるか考えてみましょう。</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">オブジェクト同士のつながりを考える</div>
<div class="ulist">
<ul>
<li>
<p>スコアシートは複数のゲームを記録できるので、スコアシートとゲームにはつながりがありそうです。</p>
</li>
<li>
<p>ゲームでは、複数のプレーヤーのスコアを記録するので、ゲームとスコアにはつながりがありそうです。</p>
</li>
<li>
<p>スコアにはフレームごとのピン数などを記録するので、スコアとフレームにはつながりがありそうです。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>オブジェクトの間のつながりを表すには「リンク」を引きます。
つながりがありそうなオブジェクト同士にリンクを引いてみましょう。</p>
</div>
<div class="paragraph">
<p>まず、スコアシートとゲームの間にリンクを引きましょう。</p>
</div>
<div id="add_link00" class="olist arabic">
<div class="title">「scoresheet01」から「game01」へリンクを引く</div>
<ol class="arabic">
<li>
<p>パレットから「リンク」を選択して、「scoresheet01」の内部へマウスカーソルを移動し、青枠が表示されるのを待つ（ <a href="_structure_design.html#add_link01">図 2.24</a> ）。</p>
</li>
</ol>
</div>
<div id="add_link01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-054611.png" alt="GSW 20220207 054611" width="100%">
</div>
<div class="title">図 2.24 リンクの引き始めのオブジェクトで青枠を表示させる</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>青枠が表示されたら、マウスのボタンを押したまま「game01」の内部へマウスカーソルを移動する（ <a href="_structure_design.html#add_link02">図 2.25</a> ）。</p>
</li>
</ol>
</div>
<div id="add_link02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-061048.png" alt="GSW 20220207 061048" width="100%">
</div>
<div class="title">図 2.25 青枠が表示されたらマウスのボタンを押したままマウスカーソルをドラッグする</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>「game01」にも青枠が表示されたら、マウスのボタンを離すとリンクが引かれる（ <a href="_structure_design.html#add_link03">図 2.26</a> ）。</p>
</li>
</ol>
</div>
<div id="add_link03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-061016.png" alt="GSW 20220207 061016" width="100%">
</div>
<div class="title">図 2.26 リンク先のオブジェクトにも青枠が表示されたらマウスのボタンを離す</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>「game02」へも同様の手順でリンクを引く。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>同様の手順で、ほかのオブジェクトの間にもリンクを引きます。</p>
</div>
<div id="add_link04" class="olist arabic">
<div class="title">ほかのオブジェクトの間にもリンクを引く</div>
<ol class="arabic">
<li>
<p>ゲームからスコアへリンクを引く（ <a href="_structure_design.html#add_link05">図 2.27</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>1ゲーム目のスコアは、1つ目のゲームにリンクを引く。</p>
</li>
<li>
<p>2ゲーム目のスコアは、1つ目のゲームにリンクを引く。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_link05" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-063524.png" alt="GSW 20220207 063524" width="100%">
</div>
<div class="title">図 2.27 ゲームからスコアへリンクを引く</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>スコアからフレームへもリンクを引く（ <a href="_structure_design.html#add_link06">図 2.28</a> ）。</p>
</li>
</ol>
</div>
<div id="add_link06" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-065042.png" alt="GSW 20220207 065042" width="100%">
</div>
<div class="title">図 2.28 残りのつながりについてリンクを引く</div>
</div>
<div class="paragraph">
<p>これで、 <a href="_structure_design.html#scoresheet01">図 2.1</a> の要素を反映したオブジェクト図が作成できました。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_スコアシートの構造をクラス図で表す"><a class="anchor" href="#_スコアシートの構造をクラス図で表す"></a>2.2 スコアシートの構造をクラス図で表す</h3>
<div class="paragraph">
<p>作成したオブジェクト図 <a href="_structure_design.html#add_link06">図 2.28</a> を元に、ゲームスコアのクラス図を作成してみましょう。</p>
</div>
<div class="sect3">
<h4 id="_スコアシートのクラス図を追加する"><a class="anchor" href="#_スコアシートのクラス図を追加する"></a>2.2.1 スコアシートのクラス図を追加する</h4>
<div class="paragraph">
<p>まず、「ゲームスコアのクラス図」を追加します。</p>
</div>
<div id="class00" class="olist arabic">
<div class="title">ゲームスコアのクラス図を追加する</div>
<ol class="arabic">
<li>
<p>構造ツリーで、「設計モデル」でポップアップメニューを開き、「図の追加＞クラス図」でモデルにクラス図を追加する（ <a href="_structure_design.html#class01">図 2.29</a> ）。</p>
</li>
</ol>
</div>
<div id="class01" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-065747.png" alt="GSW 20220207 065747" width="50%">
</div>
<div class="title">図 2.29 モデルにクラス図を追加する</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>追加した図を「ゲームスコアのクラス図」とする（ <a href="_structure_design.html#class02">図 2.30</a> ）。</p>
</li>
</ol>
</div>
<div id="class02" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-065801.png" alt="GSW 20220207 065801" width="50%">
</div>
<div class="title">図 2.30 追加した図を「ゲームスコアのクラス図」とした</div>
</div>
</div>
<div class="sect3">
<h4 id="_クラス図にクラスを追加する"><a class="anchor" href="#_クラス図にクラスを追加する"></a>2.2.2 クラス図にクラスを追加する</h4>
<div class="paragraph">
<p>「構造ツリー」をみると、オブジェクト図を作成したとき登録した「ScoreSheet」クラスや「Game」クラスなどが見つかります。
これらを1つずつドラッグ＆ドロップして、クラス図に追加します（ <a href="_structure_design.html#class03">図 2.31</a>  ）。</p>
</div>
<div id="class03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-070838.png" alt="GSW 20220207 070838" width="100%">
</div>
<div class="title">図 2.31 既存のクラスを構造ツリーからクラス図に追加する</div>
</div>
</div>
<div class="sect3">
<h4 id="_クラス間の関連を追加する１"><a class="anchor" href="#_クラス間の関連を追加する１"></a>2.2.3 クラス間の関連を追加する（１）</h4>
<div class="paragraph">
<p>作成したオブジェクト図（ <a href="_structure_design.html#add_link05">図 2.27</a> ）に記載されているリンクを参照して、リンクでつながっているオブジェクトが属するクラスの間に関連を引きます。</p>
</div>
<div class="paragraph">
<p>まず、「ScoreSheet」クラスから「Game」クラスへ向かって関連を引きましょう。</p>
</div>
<div id="add_relation00" class="olist arabic">
<div class="title">スコアシートとゲームの間に関連を追加する</div>
<ol class="arabic">
<li>
<p>「ScoreSheet」クラスから「Game」クラスへ関連を引く（ <a href="_structure_design.html#class04">図 2.32</a> ）。</p>
<div class="ulist">
<ul>
<li>
<p>パレットから矢印付きの関連を選択する。</p>
</li>
<li>
<p>「ScoreSheet」クラスから「Game」クラスへ向かって関連を引く</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class04" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-082944.png" alt="GSW 20220207 082944" width="75%">
</div>
<div class="title">図 2.32 「ScoreSheet」クラスから「Game」クラスへ関連を引いた</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>スコアシートには1ゲーム以上の複数のゲームを記録できる。このことを多重度で表す。</p>
<div class="ulist">
<ul>
<li>
<p><a href="_structure_design.html#class04">図 2.32</a> で引いた関連を選択した状態で、プロパティーからターゲットが「Game」の関連端のタブを開く。</p>
</li>
<li>
<p>「多重度」を「1..*」に設定する（ <a href="_structure_design.html#class05">図 2.33</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class05" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-083800.png" alt="GSW 20220207 083800" width="50%">
</div>
<div class="title">図 2.33 「ScoreSheet」からみた「Game」の多重度を「 1..* 」に設定した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>スコアシートがゲームを参照するときに使う名前を決めるために、関連端名を設定する。</p>
<div class="ulist">
<ul>
<li>
<p><a href="_structure_design.html#class04">図 2.32</a> で引いた関連を選択した状態で、プロパティーからターゲットが「Game」の関連端のタブを開く。</p>
</li>
<li>
<p>ゲームを複数回記録できることを反映して、「名前」を「games」に設定する（ <a href="_structure_design.html#class06">図 2.34</a> ）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class06" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-084200.png" alt="GSW 20220207 084200" width="50%">
</div>
<div class="title">図 2.34 「ScoreSheet」からみた「Game」の関連端名を「games」に設定した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>スコアシートには、プレーヤーがゲームをやるたびにゲームを追加できる（スコアシートはゲームを集約しているが、互いのライフサイクルが異なる）ことを示すために、集約を設定する。</p>
<div class="ulist">
<ul>
<li>
<p><a href="_structure_design.html#class04">図 2.32</a> で引いた関連を選択した状態で、プロパティーからターゲットが「ScoreSheet」の関連端のタブを開く。</p>
</li>
<li>
<p>「集約」のプルダウンメニューから「aggregate」を選択する（ <a href="_structure_design.html#class07">図 2.35</a>）。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="class07" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-085154.png" alt="GSW 20220207 085154" width="50%">
</div>
<div class="title">図 2.35 「ScoreSheet」が「Game」を集約していることを示した</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>「ScoreSheet」から「Game」への関連が引けた（ <a href="_structure_design.html#class08">図 2.36</a> ）。</p>
</li>
</ol>
</div>
<div id="class08" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-090055.png" alt="GSW 20220207 090055" width="75%">
</div>
<div class="title">図 2.36 「ScoreSheet」から「Game」への関連が引けた</div>
</div>
</div>
<div class="sect3">
<h4 id="_クラス間の関連を追加する２"><a class="anchor" href="#_クラス間の関連を追加する２"></a>2.2.4 クラス間の関連を追加する（２）</h4>
<div class="paragraph">
<p>こんどは、「Game」クラスから「Score」クラスへ向かって関連を引きましょう。
1組のゲームには、複数プレーヤーのスコアが記録できます。
つまり、ここにはスコアシートとゲームの間と同じような関連が引けそうですね。</p>
</div>
<div id="add_relation02" class="olist arabic">
<div class="title">ゲームとスコアの間に関連を追加する</div>
<ol class="arabic">
<li>
<p>「Game」クラスから「Score」クラスへ関連を引く。</p>
</li>
<li>
<p>「Score」クラス側の関連の多重度を「1..*」に設定する。</p>
</li>
<li>
<p>「Score」クラス側の関連端には関連端名として「scores」を設定する（複数のスコアが記録できることを反映した）。</p>
</li>
<li>
<p>「Game」クラス側の「集約」のプルダウンメニューから「aggregate」を選択する（ <a href="_structure_design.html#add_relation03">図 2.37</a> ）。</p>
</li>
</ol>
</div>
<div id="add_relation03" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-094813.png" alt="GSW 20220207 094813" width="100%">
</div>
<div class="title">図 2.37 ゲームとスコアの間に関連を引いた</div>
</div>
<div class="paragraph">
<p>そして、最後に、「Score」クラスから「Frame」クラスへ向かって関連を引きましょう。
このチュートリアルでは、スコアのオブジェクトを用意したときは、常に10フレーム分のフレームのオブジェクトも一緒に用意することとします。
この場合、フレームとスコアは同時に作成されるので（ライフサイクルが同じなので）、集約の設定もコンポジションにしておきます。</p>
</div>
<div id="add_relation04" class="olist arabic">
<div class="title">スコアとフレームの間に関連を追加する</div>
<ol class="arabic">
<li>
<p>「Score」クラスから「Frame」クラスへ関連を引く。</p>
</li>
<li>
<p>「Frame」クラス側の関連端の多重度を「10」に設定する。</p>
</li>
<li>
<p>「Frame」クラス側の関連端には関連端名として「frames」を設定する（複数のフレームが記録できることを反映した）。</p>
</li>
<li>
<p>「Score」クラス側の関連端の集約を変更する。</p>
<div class="ulist">
<ul>
<li>
<p>集約のプルダウンメニューの中から「composite」を選択する（ <a href="_structure_design.html#add_relation05">図 2.38</a> ）。</p>
</li>
<li>
<p>「Score」クラス側の関連端の表示が、黒塗りのダイアモンド（コンポジションのシンボル）に変わる。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div id="add_relation05" class="imageblock">
<div class="content">
<img src="images/GSW-20220207-122557.png" alt="GSW 20220207 122557" width="100%">
</div>
<div class="title">図 2.38 スコアとフレームの間に関連を引いた</div>
</div>
<div class="paragraph">
<p>これで、いったん、ボウリングのゲームスコアを表した構造のモデルができました。</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_まとめ"><a class="anchor" href="#_まとめ"></a>2.3 まとめ</h3>
<div class="paragraph">
<p>ボウリングのゲームスコアを記録するスコアシートの構造を検討しました。</p>
</div>
<div class="sect3">
<h4 id="_構造のモデルを作成した手順"><a class="anchor" href="#_構造のモデルを作成した手順"></a>2.3.1 構造のモデルを作成した手順</h4>
<div class="paragraph">
<p>構造のモデルに登場する構成要素や要素間の関連を見つけ出すために、 <a href="_structure_design.html#step_for_structure_model">スコアシートの構造のモデルを作成した手順</a> のような手順を使いました。</p>
</div>
<div id="step_for_structure_model" class="sidebarblock">
<div class="content">
<div class="title">スコアシートの構造のモデルを作成した手順</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>スコアシートを観察して、どのような要素で構成されているか洗い出した。</p>
</li>
<li>
<p>スコアシートの実例をそのまま使ってオブジェクト図で表した。</p>
</li>
<li>
<p>オブジェクト図の要素や要素間のつながりを観察して、クラス図を作成した。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="paragraph">
<p>まず、オブジェクト図をつくることで、オブジェクトを洗い出し、オブジェクト同士のつながり（リンク）を発見しました。
そして、オブジェクト図を参照しながら、クラス図を作成しました。
クラス間の関連の関連端名や多重度を検討する際は、オブジェクト図におけるリンクの数などを判断材料にしました。</p>
</div>
</div>
<div class="sect3">
<h4 id="_この段階の構造のモデルはまだ未完成"><a class="anchor" href="#_この段階の構造のモデルはまだ未完成"></a>2.3.2 この段階の構造のモデルはまだ未完成</h4>
<div class="paragraph">
<p>ここで作成したクラス図には、検討の余地が残っています。
たとえば、いずれのクラスにも操作が定義できていません。
これは、プレーするのに従ってスコアをつけるときの動作（振る舞い）を検討していないからです。
また、動作を検討する中で、属性や関連についても追加や修正が必要になる場合があります。</p>
</div>
<div class="paragraph">
<p>そこで、続いて振る舞いのモデルを検討します。
振る舞いのモデルの作成が進むにつれて、構造のモデルも追加・修正されることになるでしょう。</p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="_preparation.html">1</a> | ↑ Up: <a href="tut_uml_modeling_bs.html">モデルを使ってソフトウェアを開発しよう: UML初学者向けチュートリアル</a> | Next: <a href="_model_to_code_design.html">3</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
バージョン html_0643<br>
最終更新 2023-02-06 13:59:37 +0900
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>